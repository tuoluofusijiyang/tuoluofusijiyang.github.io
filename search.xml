<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>springBoot 自定义 banner 与 web 开发</title>
      <link href="/2019/springboot11051121/"/>
      <url>/2019/springboot11051121/</url>
      
        <content type="html"><![CDATA[<h3 id="SpringBootApplication"><a href="#SpringBootApplication" class="headerlink" title="@SpringBootApplication"></a>@SpringBootApplication</h3><p>该注解相关的几个方法</p><ul><li><p>exclude, 排除某些类添加至 spring 容器管理，参数为 class 对象</p></li><li><p>excludeName，排除某些类添加至 spring 容器管理，参数为 class path 字符串</p></li><li><p>scanBasePackages，将某些包下的类添加进入 spring 扫描文件，参数为 class path 字符串</p></li><li><p>scanBasePackageClasses, 将某些包下的类添加进入 spring 扫描文件，参数为 class 对象</p></li></ul><a id="more"></a><h3 id="springBoot-的-banner-图"><a href="#springBoot-的-banner-图" class="headerlink" title="springBoot 的 banner 图"></a>springBoot 的 banner 图</h3><p>不显示 banner</p><p>通过 springBootTestRun.setBannerMode(Banner.Mode.OFF);</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yxj.spring;</span><br><span class="line"><span class="keyword">import</span> com.yxj.spring.Initializer.MyApplicationContextInitializer;</span><br><span class="line"><span class="keyword">import</span> com.yxj.spring.monitor.MyApplicationListener;</span><br><span class="line"><span class="keyword">import</span> com.yxj.spring.monitor.MyEvent;</span><br><span class="line"><span class="keyword">import</span> com.yxj.spring.properties.TestProperties;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.Banner;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.CommandLineRunner;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContextInitializer;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationListener;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ConfigurableApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Import;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ProjectName</span>: springBootDemo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Package</span>: com.yxj.spring</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: 阿杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@CreateDate</span>: 2019/1/18 20:18</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateUser</span>: 暂无</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateDate</span>: 2019/1/18 20:18</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateRemark</span>: The modified content</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span>: 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringBootTestRun</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication springBootTestRun = <span class="keyword">new</span> SpringApplication(SpringBootTestRun<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        springBootTestRun.setBannerMode(Banner.Mode.OFF);</span><br><span class="line">        ConfigurableApplicationContext run = springBootTestRun.run(args);</span><br><span class="line">        run.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">package</span> com.yxj.spring;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> com.yxj.spring.Initializer.MyApplicationContextInitializer;</span><br><span class="line"><span class="keyword">import</span> com.yxj.spring.monitor.MyApplicationListener;</span><br><span class="line"><span class="keyword">import</span> com.yxj.spring.monitor.MyEvent;</span><br><span class="line"><span class="keyword">import</span> com.yxj.spring.properties.TestProperties;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.Banner;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.CommandLineRunner;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContextInitializer;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationListener;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ConfigurableApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Import;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ProjectName</span>: springBootDemo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Package</span>: com.yxj.spring</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: 阿杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@CreateDate</span>: 2019/1/18 20:18</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateUser</span>: 暂无</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateDate</span>: 2019/1/18 20:18</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateRemark</span>: The modified content</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span>: 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringBootTestRun</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication springBootTestRun = <span class="keyword">new</span> SpringApplication(SpringBootTestRun<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        springBootTestRun.setBannerMode(Banner.Mode.OFF);</span><br><span class="line">        ConfigurableApplicationContext run = springBootTestRun.run(args);</span><br><span class="line">        run.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>自定义 banner</p><p>方式一</p><p>在 resource 目录下新建 banner.txt，txt 放入自定义内容</p><p>方式二</p><p>在 resource 目录下新建自定义名称. txt，在 application.properties 中添加 “spring.banner.location = 自定义名称. txt”</p><p>方式三</p><p>自定义 banner 也可以是图片，会自动解析为 ASCII 艺术字，名称为 banner.jpg/banner.png/banner.gif</p><p>方式四</p><p>自定义图片名称，通过在 application.properties 中添加 “spring.banner.image.location = 自定义名称. jpg”</p><p>在启动项目的时候，文字和图片可以共同显示，图片优先级大于文字</p><p>SpringBoot 自定义启动 Banner 在线生成工具</p><p><a href="https://www.bootschool.net/ascii" target="_blank" rel="external nofollow noopener noreferrer">https://www.bootschool.net/ascii</a></p><p>SpringBoot 艺术字</p><p><a href="https://www.bootschool.net/ascii-art" target="_blank" rel="external nofollow noopener noreferrer">https://www.bootschool.net/ascii-art</a></p><h3 id="web-开发"><a href="#web-开发" class="headerlink" title="web 开发"></a>web 开发</h3><p>测试访问</p><p>pom 文件</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.yxj.spring<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springBootDemo<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Inherit defaults from Spring Boot --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Add typical dependencies for a web application --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Package as an executable jar --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"> </span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.yxj.spring<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springBootDemo<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"> </span><br><span class="line">    <span class="comment">&lt;!-- Inherit defaults from Spring Boot --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"> </span><br><span class="line">    <span class="comment">&lt;!-- Add typical dependencies for a web application --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"> </span><br><span class="line">    <span class="comment">&lt;!-- Package as an executable jar --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><p>controller 方法</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yxj.spring.controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ProjectName</span>: springBootDemo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Package</span>: com.yxj.spring.controller</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: <span class="doctag">@RestController</span>表示当前controller方法的返回值可以直接用于返回值输出==<span class="doctag">@ResponseBody</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: 阿杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@CreateDate</span>: 2019/1/27 23:21</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateUser</span>: 暂无</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateDate</span>: 2019/1/27 23:21</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateRemark</span>: The modified content</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span>: 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(<span class="meta-string">"my"</span>)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@GetMapping(<span class="meta-string">"testWeb"</span>)</span></span><br><span class="line">    <span class="keyword">public</span> String testWeb(HttpServletRequest request)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"测试"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@GetMapping(value = <span class="meta-string">"/pathParam/&#123;id&#125;"</span>)</span></span><br><span class="line">    <span class="keyword">public</span> String pathParam(<span class="meta">@PathVariable(value = <span class="meta-string">"id"</span>)</span> String id)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"测试, id = "</span>+id;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">package</span> com.yxj.spring.controller;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.*;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ProjectName</span>: springBootDemo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Package</span>: com.yxj.spring.controller</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: <span class="doctag">@RestController</span>表示当前controller方法的返回值可以直接用于返回值输出==<span class="doctag">@ResponseBody</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: 阿杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@CreateDate</span>: 2019/1/27 23:21</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateUser</span>: 暂无</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateDate</span>: 2019/1/27 23:21</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateRemark</span>: The modified content</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span>: 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(<span class="meta-string">"my"</span>)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyController</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@GetMapping(<span class="meta-string">"testWeb"</span>)</span></span><br><span class="line">    <span class="keyword">public</span> String testWeb(HttpServletRequest request)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"测试"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@GetMapping(value = <span class="meta-string">"/pathParam/&#123;id&#125;"</span>)</span></span><br><span class="line">    <span class="keyword">public</span> String pathParam(<span class="meta">@PathVariable(value = <span class="meta-string">"id"</span>)</span> String id)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"测试, id = "</span>+id;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>springBoot 启动类</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yxj.spring;</span><br><span class="line"><span class="keyword">import</span> com.yxj.spring.Initializer.MyApplicationContextInitializer;</span><br><span class="line"><span class="keyword">import</span> com.yxj.spring.monitor.MyApplicationListener;</span><br><span class="line"><span class="keyword">import</span> com.yxj.spring.monitor.MyEvent;</span><br><span class="line"><span class="keyword">import</span> com.yxj.spring.properties.TestProperties;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.Banner;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.CommandLineRunner;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContextInitializer;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationListener;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ConfigurableApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Import;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ProjectName</span>: springBootDemo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Package</span>: com.yxj.spring</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: 阿杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@CreateDate</span>: 2019/1/18 20:18</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateUser</span>: 暂无</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateDate</span>: 2019/1/18 20:18</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateRemark</span>: The modified content</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span>: 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringBootTestRun</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication springBootTestRun = <span class="keyword">new</span> SpringApplication(SpringBootTestRun<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        ConfigurableApplicationContext run = springBootTestRun.run(args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">package</span> com.yxj.spring;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> com.yxj.spring.Initializer.MyApplicationContextInitializer;</span><br><span class="line"><span class="keyword">import</span> com.yxj.spring.monitor.MyApplicationListener;</span><br><span class="line"><span class="keyword">import</span> com.yxj.spring.monitor.MyEvent;</span><br><span class="line"><span class="keyword">import</span> com.yxj.spring.properties.TestProperties;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.Banner;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.CommandLineRunner;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContextInitializer;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationListener;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ConfigurableApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Import;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ProjectName</span>: springBootDemo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Package</span>: com.yxj.spring</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: 阿杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@CreateDate</span>: 2019/1/18 20:18</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateUser</span>: 暂无</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateDate</span>: 2019/1/18 20:18</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateRemark</span>: The modified content</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span>: 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringBootTestRun</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication springBootTestRun = <span class="keyword">new</span> SpringApplication(SpringBootTestRun<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        ConfigurableApplicationContext run = springBootTestRun.run(args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>测试访问路径<br><a href="http://localhost:8080/my/testWeb" target="_blank" rel="external nofollow noopener noreferrer">http://localhost:8080/my/testWeb</a></p><p>指定端口</p><p>application.properties</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server.port</span>=<span class="number">80</span></span><br></pre></td></tr></table></figure><p>返回 jsp 页面</p><p>springBoot 默认不支持 jsp 组建，需要添加 maven 包<br>添加依赖包</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.tomcat.embed<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>tomcat-embed-jasper<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.tomcat.embed<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>tomcat-embed-jasper<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>application.properties 指定前缀和后缀</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">spring<span class="selector-class">.mvc</span><span class="selector-class">.view</span>.prefix=/</span><br><span class="line">spring<span class="selector-class">.mvc</span><span class="selector-class">.view</span>.suffix=.jsp</span><br><span class="line">spring<span class="selector-class">.mvc</span><span class="selector-class">.view</span>.prefix=/</span><br><span class="line">spring<span class="selector-class">.mvc</span><span class="selector-class">.view</span>.suffix=.jsp</span><br></pre></td></tr></table></figure><p>prefix=/，这里的 / 指的是 webapp，为 jsp 根目录，idea 中可以设置 web 根目录</p><p><img src="http://q2jt1v8qv.bkt.clouddn.com/11.jpg" alt></p><p><img src="http://q2jt1v8qv.bkt.clouddn.com/2.jpg" alt></p><p>webapp 下新增 test.jsp</p><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="meta">&lt;!DOCTYPE html&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="xml">this is test jsp , get controller param is $</span><span class="template-variable">&#123;testParam&#125;</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="meta">&lt;!DOCTYPE html&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="xml">this is test jsp , get controller param is $</span><span class="template-variable">&#123;testParam&#125;</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>访问 jsp 的 controller 代码</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yxj.spring.controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ui.Model;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.PathVariable;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.ModelAndView;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ProjectName</span>: springBootDemo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Package</span>: com.yxj.spring.controller</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: 阿杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@CreateDate</span>: 2019/1/28 0:00</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateUser</span>: 暂无</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateDate</span>: 2019/1/28 0:00</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateRemark</span>: The modified content</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span>: 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JspController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@GetMapping(value = <span class="meta-string">"/toTsetJsp/&#123;id&#125;"</span>)</span></span><br><span class="line">    <span class="keyword">public</span> ModelAndView toTsetJsp(<span class="meta">@PathVariable</span> String id)&#123;</span><br><span class="line">        ModelAndView modelAndView = new ModelAndView(<span class="string">"/test"</span>);</span><br><span class="line">        modelAndView.addObject(<span class="string">"testParam"</span>,id);</span><br><span class="line">        <span class="keyword">return</span> modelAndView;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">package</span> com.yxj.spring.controller;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ui.Model;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.PathVariable;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.ModelAndView;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ProjectName</span>: springBootDemo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Package</span>: com.yxj.spring.controller</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: 阿杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@CreateDate</span>: 2019/1/28 0:00</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateUser</span>: 暂无</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateDate</span>: 2019/1/28 0:00</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateRemark</span>: The modified content</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span>: 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JspController</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@GetMapping(value = <span class="meta-string">"/toTsetJsp/&#123;id&#125;"</span>)</span></span><br><span class="line">    <span class="keyword">public</span> ModelAndView toTsetJsp(<span class="meta">@PathVariable</span> String id)&#123;</span><br><span class="line">        ModelAndView modelAndView = new ModelAndView(<span class="string">"/test"</span>);</span><br><span class="line">        modelAndView.addObject(<span class="string">"testParam"</span>,id);</span><br><span class="line">        <span class="keyword">return</span> modelAndView;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>使用 freemarker</p><p>加入依赖，pom.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-freemarker<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-freemarker<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>访问 controller</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yxj.spring.controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.PathVariable;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.ModelAndView;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ProjectName</span>: springBootDemo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Package</span>: com.yxj.spring.controller</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: 阿杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@CreateDate</span>: 2019/1/28 20:47</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateUser</span>: 暂无</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateDate</span>: 2019/1/28 20:47</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateRemark</span>: The modified content</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span>: 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FreemarkerController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@GetMapping(value = <span class="meta-string">"/testFreeMarker/&#123;id&#125;"</span>)</span></span><br><span class="line">    <span class="keyword">public</span> ModelAndView testFreeMarker(<span class="meta">@PathVariable(value = <span class="meta-string">"id"</span>)</span> String id)&#123;</span><br><span class="line">        ModelAndView mv = new ModelAndView();</span><br><span class="line">        mv.setViewName(<span class="string">"a"</span>);</span><br><span class="line">        mv.addObject(<span class="string">"userName"</span>,id);</span><br><span class="line">        <span class="keyword">return</span> mv;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">package</span> com.yxj.spring.controller;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.PathVariable;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.ModelAndView;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ProjectName</span>: springBootDemo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Package</span>: com.yxj.spring.controller</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: 阿杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@CreateDate</span>: 2019/1/28 20:47</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateUser</span>: 暂无</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateDate</span>: 2019/1/28 20:47</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateRemark</span>: The modified content</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span>: 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FreemarkerController</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@GetMapping(value = <span class="meta-string">"/testFreeMarker/&#123;id&#125;"</span>)</span></span><br><span class="line">    <span class="keyword">public</span> ModelAndView testFreeMarker(<span class="meta">@PathVariable(value = <span class="meta-string">"id"</span>)</span> String id)&#123;</span><br><span class="line">        ModelAndView mv = new ModelAndView();</span><br><span class="line">        mv.setViewName(<span class="string">"a"</span>);</span><br><span class="line">        mv.addObject(<span class="string">"userName"</span>,id);</span><br><span class="line">        <span class="keyword">return</span> mv;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在 resource 下添加文件夹 templates，其中添加 a.ftl</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;h1&gt;<span class="keyword">this</span> <span class="keyword">is</span> test ftl, <span class="keyword">get</span> param <span class="keyword">is</span> $&#123;userName&#125;&lt;/h1&gt;</span><br></pre></td></tr></table></figure><p>访问链接<br><a href="http://localhost/testFreeMarker/123" target="_blank" rel="external nofollow noopener noreferrer">http://localhost/testFreeMarker/123</a><br>访问页面，数据渲染正常</p><p>默认目录为 classpath:/templates/<br>源码中有个默认值</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Source code recreated from a .class file by IntelliJ IDEA</span></span><br><span class="line"><span class="comment">// (powered by Fernflower decompiler)</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line">package org.springframework.boot.autoconfigure.freemarker;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.<span class="keyword">template</span>.AbstractTemplateViewResolverProperties;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.context.properties.ConfigurationProperties;</span><br><span class="line">@ConfigurationProperties(</span><br><span class="line">    prefix = <span class="string">"spring.freemarker"</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FreeMarkerProperties</span> <span class="title">extends</span> <span class="title">AbstractTemplateViewResolverProperties</span> &#123;</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> final <span class="keyword">String</span> DEFAULT_TEMPLATE_LOADER_PATH = <span class="string">"classpath:/templates/"</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> final <span class="keyword">String</span> DEFAULT_PREFIX = <span class="string">""</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> final <span class="keyword">String</span> DEFAULT_SUFFIX = <span class="string">".ftl"</span>;</span><br><span class="line">    <span class="keyword">private</span> Map&lt;<span class="keyword">String</span>, <span class="keyword">String</span>&gt; settings = <span class="keyword">new</span> HashMap();</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">String</span>[] templateLoaderPath = <span class="keyword">new</span> <span class="keyword">String</span>[]&#123;<span class="string">"classpath:/templates/"</span>&#125;;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> preferFileSystemAccess = <span class="literal">true</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">FreeMarkerProperties</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        super(<span class="string">""</span>, <span class="string">".ftl"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> Map&lt;<span class="keyword">String</span>, <span class="keyword">String</span>&gt; getSettings() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.settings;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSettings</span><span class="params">(Map&lt;<span class="keyword">String</span>, <span class="keyword">String</span>&gt; settings)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.settings = settings;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">String</span>[] getTemplateLoaderPath() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.templateLoaderPath;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isPreferFileSystemAccess</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.preferFileSystemAccess;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPreferFileSystemAccess</span><span class="params">(<span class="keyword">boolean</span> preferFileSystemAccess)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.preferFileSystemAccess = preferFileSystemAccess;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setTemplateLoaderPath</span><span class="params">(<span class="keyword">String</span>... templateLoaderPaths)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.templateLoaderPath = templateLoaderPaths;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Source code recreated from a .class file by IntelliJ IDEA</span></span><br><span class="line"><span class="comment">// (powered by Fernflower decompiler)</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"> </span><br><span class="line">package org.springframework.boot.autoconfigure.freemarker;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.<span class="keyword">template</span>.AbstractTemplateViewResolverProperties;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.context.properties.ConfigurationProperties;</span><br><span class="line"> </span><br><span class="line">@ConfigurationProperties(</span><br><span class="line">    prefix = <span class="string">"spring.freemarker"</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FreeMarkerProperties</span> <span class="title">extends</span> <span class="title">AbstractTemplateViewResolverProperties</span> &#123;</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> final <span class="keyword">String</span> DEFAULT_TEMPLATE_LOADER_PATH = <span class="string">"classpath:/templates/"</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> final <span class="keyword">String</span> DEFAULT_PREFIX = <span class="string">""</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> final <span class="keyword">String</span> DEFAULT_SUFFIX = <span class="string">".ftl"</span>;</span><br><span class="line">    <span class="keyword">private</span> Map&lt;<span class="keyword">String</span>, <span class="keyword">String</span>&gt; settings = <span class="keyword">new</span> HashMap();</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">String</span>[] templateLoaderPath = <span class="keyword">new</span> <span class="keyword">String</span>[]&#123;<span class="string">"classpath:/templates/"</span>&#125;;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> preferFileSystemAccess = <span class="literal">true</span>;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">FreeMarkerProperties</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        super(<span class="string">""</span>, <span class="string">".ftl"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> Map&lt;<span class="keyword">String</span>, <span class="keyword">String</span>&gt; getSettings() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.settings;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSettings</span><span class="params">(Map&lt;<span class="keyword">String</span>, <span class="keyword">String</span>&gt; settings)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.settings = settings;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">String</span>[] getTemplateLoaderPath() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.templateLoaderPath;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isPreferFileSystemAccess</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.preferFileSystemAccess;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPreferFileSystemAccess</span><span class="params">(<span class="keyword">boolean</span> preferFileSystemAccess)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.preferFileSystemAccess = preferFileSystemAccess;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setTemplateLoaderPath</span><span class="params">(<span class="keyword">String</span>... templateLoaderPaths)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.templateLoaderPath = templateLoaderPaths;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>通过在 application.properties 中可以配置默认路径</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spring.freemarker.template-loader-path=<span class="keyword">classpath</span>:<span class="regexp">/templatesTest/</span></span><br></pre></td></tr></table></figure><p>切换 jetty 容器</p><p>springBoot 默认内置的是 tomcat 容器，切换 jetty 容器，需要配置<br>pom 文件 spring-boot-starter-web 排除 tomcat 的引用，注释掉 springBoot 支持 jsp，该依赖会导致切换 jetty 成功，但是使用的依然是 tomcat 容器</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.yxj.spring<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springBootDemo<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Inherit defaults from Spring Boot --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Add typical dependencies for a web application --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--排除tomcat的引用--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-tomcat<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--使springBoot支持jsp--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--&lt;dependency&gt;</span></span><br><span class="line"><span class="comment">            &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;</span></span><br><span class="line"><span class="comment">            &lt;artifactId&gt;tomcat-embed-jasper&lt;/artifactId&gt;</span></span><br><span class="line"><span class="comment">        &lt;/dependency&gt;--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--使springBoot支持freemarker--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-freemarker<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--添加jetty依赖--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-jetty<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Package as an executable jar --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"> </span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.yxj.spring<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springBootDemo<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"> </span><br><span class="line">    <span class="comment">&lt;!-- Inherit defaults from Spring Boot --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"> </span><br><span class="line">    <span class="comment">&lt;!-- Add typical dependencies for a web application --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--排除tomcat的引用--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-tomcat<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"> </span><br><span class="line">        <span class="comment">&lt;!--使springBoot支持jsp--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--&lt;dependency&gt;</span></span><br><span class="line"><span class="comment">            &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;</span></span><br><span class="line"><span class="comment">            &lt;artifactId&gt;tomcat-embed-jasper&lt;/artifactId&gt;</span></span><br><span class="line"><span class="comment">        &lt;/dependency&gt;--&gt;</span></span><br><span class="line"> </span><br><span class="line">        <span class="comment">&lt;!--使springBoot支持freemarker--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-freemarker<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"> </span><br><span class="line">        <span class="comment">&lt;!--添加jetty依赖--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-jetty<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"> </span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"> </span><br><span class="line">    <span class="comment">&lt;!-- Package as an executable jar --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><p>重新编译，查看日志，包含有 jetty 字样，表示容器切换成功</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">JettyWebServer  : Jetty started <span class="keyword">on</span> port(s) <span class="number">80</span> (http/<span class="number">1.1</span>) <span class="keyword">with</span> context <span class="type">path</span> <span class="string">'/'</span></span><br></pre></td></tr></table></figure><p>关于 jetty 与 tomcat 区别与用途，可以查看博客 <a href="https://blog.csdn.net/u014209975/article/details/52598428" target="_blank" rel="external nofollow noopener noreferrer">https://blog.csdn.net/u014209975/article/details/52598428</a></p><p>静态资源读取</p><ol><li>在 webapp 下 - web 根目录，在文件下面新建 img，放入 test.png<br>可以通过 <a href="http://localhost/img/test.png" target="_blank" rel="external nofollow noopener noreferrer">http://localhost/img/test.png</a> 正常访问到  </li><li>在 resource 下的这几个文件，也是可以放静态文件的，默认访问路径也是 /</li></ol><figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">String</span>[] CLASSPATH_RESOURCE_LOCATIONS = &#123;</span><br><span class="line">            <span class="string">"classpath:/META-INF/resources/"</span>, <span class="string">"classpath:/resources/"</span>,</span><br><span class="line">            <span class="string">"classpath:/static/"</span>, <span class="string">"classpath:/public/"</span> &#125;;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">String</span>[] CLASSPATH_RESOURCE_LOCATIONS = &#123;</span><br><span class="line">            <span class="string">"classpath:/META-INF/resources/"</span>, <span class="string">"classpath:/resources/"</span>,</span><br><span class="line">            <span class="string">"classpath:/static/"</span>, <span class="string">"classpath:/public/"</span> &#125;;</span><br></pre></td></tr></table></figure><p><img src="http://q2jt1v8qv.bkt.clouddn.com/3.jpg" alt></p><p>经过测试，以下两个链接可以访问到各个对应的静态图片</p><ul><li><p><a href="http://localhost/springBootDemo/img/test1.png" target="_blank" rel="external nofollow noopener noreferrer">http://localhost/springBootDemo/img/test1.png</a></p></li><li><p><a href="http://localhost/springBootDemo/img/test.png" target="_blank" rel="external nofollow noopener noreferrer">http://localhost/springBootDemo/img/test.png</a></p></li></ul><ol start="3"><li>可以通过在 application.properties 中添加参数来指定默认路径</li></ol><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#修改静态资源默认访问路径(修改之后，resource下的几个默认文件地址不会生效，webapp可以正常访问)</span><br><span class="line">spring.resources.<span class="keyword">static</span>-locations=<span class="keyword">classpath</span>:<span class="regexp">/html/</span></span><br><span class="line">#修改静态资源默认访问路径(修改之后，resource下的几个默认文件地址不会生效，webapp可以正常访问)</span><br><span class="line">spring.resources.<span class="keyword">static</span>-locations=<span class="keyword">classpath</span>:<span class="regexp">/html/</span></span><br></pre></td></tr></table></figure><p>springBoot 异常处理</p><p>springBoot 对异常做了特殊处理</p><p>springBoot 处理之后 - 404 页面</p><p><img src="http://q2jt1v8qv.bkt.clouddn.com/4.jpg" alt></p><p>springBoot 处理之后 - 500 页面</p><p><img src="http://q2jt1v8qv.bkt.clouddn.com/5.jpg" alt></p><p>排除 springBoot 对异常处理的方式</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yxj.spring;</span><br><span class="line"><span class="keyword">import</span> com.yxj.spring.Initializer.MyApplicationContextInitializer;</span><br><span class="line"><span class="keyword">import</span> com.yxj.spring.monitor.MyApplicationListener;</span><br><span class="line"><span class="keyword">import</span> com.yxj.spring.monitor.MyEvent;</span><br><span class="line"><span class="keyword">import</span> com.yxj.spring.properties.TestProperties;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.Banner;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.CommandLineRunner;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.web.servlet.error.ErrorMvcAutoConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContextInitializer;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationListener;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ConfigurableApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Import;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ProjectName</span>: springBootDemo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Package</span>: com.yxj.spring</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: 阿杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@CreateDate</span>: 2019/1/18 20:18</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateUser</span>: 暂无</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateDate</span>: 2019/1/18 20:18</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateRemark</span>: The modified content</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span>: 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 排除springBoot对异常的默认处理</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span>(exclude = ErrorMvcAutoConfiguration<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class"><span class="title">public</span> <span class="title">class</span> <span class="title">SpringBootTestRun</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication springBootTestRun = <span class="keyword">new</span> SpringApplication(SpringBootTestRun<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        ConfigurableApplicationContext run = springBootTestRun.run(args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">package</span> com.yxj.spring;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> com.yxj.spring.Initializer.MyApplicationContextInitializer;</span><br><span class="line"><span class="keyword">import</span> com.yxj.spring.monitor.MyApplicationListener;</span><br><span class="line"><span class="keyword">import</span> com.yxj.spring.monitor.MyEvent;</span><br><span class="line"><span class="keyword">import</span> com.yxj.spring.properties.TestProperties;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.Banner;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.CommandLineRunner;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.web.servlet.error.ErrorMvcAutoConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContextInitializer;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationListener;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ConfigurableApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Import;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ProjectName</span>: springBootDemo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Package</span>: com.yxj.spring</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: 阿杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@CreateDate</span>: 2019/1/18 20:18</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateUser</span>: 暂无</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateDate</span>: 2019/1/18 20:18</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateRemark</span>: The modified content</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span>: 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 排除springBoot对异常的默认处理</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span>(exclude = ErrorMvcAutoConfiguration<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class"><span class="title">public</span> <span class="title">class</span> <span class="title">SpringBootTestRun</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication springBootTestRun = <span class="keyword">new</span> SpringApplication(SpringBootTestRun<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        ConfigurableApplicationContext run = springBootTestRun.run(args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>springBoot 处理之前 - 500</p><p><img src="http://q2jt1v8qv.bkt.clouddn.com/6.jpg" alt></p><p>springBoot 处理之前 - 404</p><p><img src="http://q2jt1v8qv.bkt.clouddn.com/7.jpg" alt></p><p>自定义异常处理</p><ol><li>通过实现 ErrorPageRegistrar 接口的方式 (类似 web.xml 中配置的 errpage 标签的形式)</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yxj.spring.myException;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.web.server.ErrorPage;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.web.server.ErrorPageRegistrar;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.web.server.ErrorPageRegistry;</span><br><span class="line"><span class="keyword">import</span> org.springframework.http.HttpStatus;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ProjectName</span>: springBootDemo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Package</span>: com.yxj.spring.myException</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: 阿杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@CreateDate</span>: 2019/1/29 14:51</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateUser</span>: 暂无</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateDate</span>: 2019/1/29 14:51</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateRemark</span>: The modified content</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span>: 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CommonErrorPageRegistrar</span> <span class="keyword">implements</span> <span class="title">ErrorPageRegistrar</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 如果相对某个异常做单独页面的跳转处理</span></span><br><span class="line"><span class="comment">     * ErrorPage(Class&lt;? extends Throwable&gt; exception, String path)</span></span><br><span class="line"><span class="comment">     * 可以添加一个Class对象，和跳转路径。</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> registry</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">registerErrorPages</span><span class="params">(ErrorPageRegistry registry)</span> </span>&#123;</span><br><span class="line">        ErrorPage ep404 = <span class="keyword">new</span> ErrorPage(HttpStatus.NOT_FOUND,<span class="string">"/html/404.html"</span>);</span><br><span class="line">        ErrorPage ep500 = <span class="keyword">new</span> ErrorPage(HttpStatus.INTERNAL_SERVER_ERROR,<span class="string">"/html/500.html"</span>);</span><br><span class="line">        registry.addErrorPages(ep404,ep500);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">package</span> com.yxj.spring.myException;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.web.server.ErrorPage;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.web.server.ErrorPageRegistrar;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.web.server.ErrorPageRegistry;</span><br><span class="line"><span class="keyword">import</span> org.springframework.http.HttpStatus;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ProjectName</span>: springBootDemo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Package</span>: com.yxj.spring.myException</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: 阿杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@CreateDate</span>: 2019/1/29 14:51</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateUser</span>: 暂无</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateDate</span>: 2019/1/29 14:51</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateRemark</span>: The modified content</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span>: 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CommonErrorPageRegistrar</span> <span class="keyword">implements</span> <span class="title">ErrorPageRegistrar</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 如果相对某个异常做单独页面的跳转处理</span></span><br><span class="line"><span class="comment">     * ErrorPage(Class&lt;? extends Throwable&gt; exception, String path)</span></span><br><span class="line"><span class="comment">     * 可以添加一个Class对象，和跳转路径。</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> registry</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">registerErrorPages</span><span class="params">(ErrorPageRegistry registry)</span> </span>&#123;</span><br><span class="line">        ErrorPage ep404 = <span class="keyword">new</span> ErrorPage(HttpStatus.NOT_FOUND,<span class="string">"/html/404.html"</span>);</span><br><span class="line">        ErrorPage ep500 = <span class="keyword">new</span> ErrorPage(HttpStatus.INTERNAL_SERVER_ERROR,<span class="string">"/html/500.html"</span>);</span><br><span class="line">        registry.addErrorPages(ep404,ep500);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>自定义异常处理的页面 - 404</p><p><img src="http://q2jt1v8qv.bkt.clouddn.com/8.jpg" alt></p><p>自定义异常处理的页面 - 500</p><p><img src="http://q2jt1v8qv.bkt.clouddn.com/9.jpg" alt></p><ol start="2"><li>通过 @ExceptionHandler 注解（这个处理方式可以返回字符串或者 json，可以获取到具体的异常 message, 通常用作全局异常处理，也可以做细分）</li></ol><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yxj.spring.myException;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.ControllerAdvice;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.ExceptionHandler;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.ResponseBody;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ProjectName</span>: springBootDemo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Package</span>: com.yxj.spring.myException</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: 阿杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@CreateDate</span>: 2019/1/29 15:18</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateUser</span>: 暂无</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateDate</span>: 2019/1/29 15:18</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateRemark</span>: The modified content</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span>: 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@ControllerAdvice</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ExceptionAdvice</span> </span>&#123;</span><br><span class="line">    <span class="meta">@ExceptionHandler(Exception.class)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> String handleException(Exception e)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"检测到异常："</span>+e.getMessage();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">package</span> com.yxj.spring.myException;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.ControllerAdvice;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.ExceptionHandler;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.ResponseBody;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ProjectName</span>: springBootDemo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Package</span>: com.yxj.spring.myException</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: 阿杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@CreateDate</span>: 2019/1/29 15:18</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateUser</span>: 暂无</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateDate</span>: 2019/1/29 15:18</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateRemark</span>: The modified content</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span>: 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@ControllerAdvice</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ExceptionAdvice</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@ExceptionHandler(Exception.class)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> String handleException(Exception e)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"检测到异常："</span>+e.getMessage();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>tomcat 配置</p><p>内置 tomcat 的 log access 相关配置</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#缓冲输出，定期刷新</span></span><br><span class="line"><span class="attr">server.tomcat.accesslog.buffered</span>=<span class="literal">true</span></span><br><span class="line"><span class="comment">#创建日志文件的目录。可以是相对于Tomcat基目录或绝对目录。</span></span><br><span class="line"><span class="attr">server.tomcat.accesslog.directory</span>=d:/springBootDemoLogs</span><br><span class="line"><span class="comment">#启用日志(true会生成日志文件到directory指定的路径，false不会生成)</span></span><br><span class="line"><span class="attr">server.tomcat.accesslog.enabled</span>=<span class="literal">true</span></span><br><span class="line"><span class="comment">#生成的日志名称的日期格式</span></span><br><span class="line"><span class="attr">server.tomcat.accesslog.file-date-format</span>=.yyyy-MM-dd</span><br><span class="line"><span class="comment">#访问日志的格式模式 详细使用查看- https://www.cnblogs.com/chrischennx/p/6746214.html</span></span><br><span class="line"><span class="attr">server.tomcat.accesslog.pattern</span>=common</span><br><span class="line"><span class="comment">#日志文件名字前缀</span></span><br><span class="line"><span class="attr">server.tomcat.accesslog.prefix</span>=springBoot_demo_logs</span><br><span class="line"><span class="comment">#是否延迟在文件名中包含日期戳，直到旋转时间</span></span><br><span class="line"><span class="attr">server.tomcat.accesslog.rename-on-rotate</span>=<span class="literal">false</span></span><br><span class="line"><span class="comment">#设置请求的IP地址，主机名，协议和端口的请求属性</span></span><br><span class="line"><span class="attr">server.tomcat.accesslog.request-attributes-enabled</span>=<span class="literal">false</span></span><br><span class="line"><span class="comment">#是否启用访问日志轮换。</span></span><br><span class="line"><span class="attr">server.tomcat.accesslog.rotate</span>=<span class="literal">true</span></span><br><span class="line"><span class="comment">#日志文件名称的后缀</span></span><br><span class="line"><span class="attr">server.tomcat.accesslog.suffix</span>=.log</span><br><span class="line"><span class="comment">#缓冲输出，定期刷新</span></span><br><span class="line"><span class="attr">server.tomcat.accesslog.buffered</span>=<span class="literal">true</span></span><br><span class="line"><span class="comment">#创建日志文件的目录。可以是相对于Tomcat基目录或绝对目录。</span></span><br><span class="line"><span class="attr">server.tomcat.accesslog.directory</span>=d:/springBootDemoLogs</span><br><span class="line"><span class="comment">#启用日志(true会生成日志文件到directory指定的路径，false不会生成)</span></span><br><span class="line"><span class="attr">server.tomcat.accesslog.enabled</span>=<span class="literal">true</span></span><br><span class="line"><span class="comment">#生成的日志名称的日期格式</span></span><br><span class="line"><span class="attr">server.tomcat.accesslog.file-date-format</span>=.yyyy-MM-dd</span><br><span class="line"><span class="comment">#访问日志的格式模式 详细使用查看- https://www.cnblogs.com/chrischennx/p/6746214.html</span></span><br><span class="line"><span class="attr">server.tomcat.accesslog.pattern</span>=common</span><br><span class="line"><span class="comment">#日志文件名字前缀</span></span><br><span class="line"><span class="attr">server.tomcat.accesslog.prefix</span>=springBoot_demo_logs</span><br><span class="line"><span class="comment">#是否延迟在文件名中包含日期戳，直到旋转时间</span></span><br><span class="line"><span class="attr">server.tomcat.accesslog.rename-on-rotate</span>=<span class="literal">false</span></span><br><span class="line"><span class="comment">#设置请求的IP地址，主机名，协议和端口的请求属性</span></span><br><span class="line"><span class="attr">server.tomcat.accesslog.request-attributes-enabled</span>=<span class="literal">false</span></span><br><span class="line"><span class="comment">#是否启用访问日志轮换。</span></span><br><span class="line"><span class="attr">server.tomcat.accesslog.rotate</span>=<span class="literal">true</span></span><br><span class="line"><span class="comment">#日志文件名称的后缀</span></span><br><span class="line"><span class="attr">server.tomcat.accesslog.suffix</span>=.log</span><br></pre></td></tr></table></figure><p>tomcat 最大线程数和连接数设置</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#设置tomcat的最大线程数</span></span><br><span class="line"><span class="attr">server.tomcat.max-threads</span>=<span class="number">1000</span></span><br><span class="line"><span class="comment">#设置tomcat的最大连接数</span></span><br><span class="line"><span class="attr">server.tomcat.max-connections</span>=<span class="number">20000</span></span><br><span class="line"><span class="comment">#设置tomcat的最大线程数</span></span><br><span class="line"><span class="attr">server.tomcat.max-threads</span>=<span class="number">1000</span></span><br><span class="line"><span class="comment">#设置tomcat的最大连接数</span></span><br><span class="line"><span class="attr">server.tomcat.max-connections</span>=<span class="number">20000</span></span><br></pre></td></tr></table></figure><h2 id="声明"><a href="#声明" class="headerlink" title="声明"></a>声明</h2><ul><li><p>本人是与 springBoot 教学视频同步学习，此文章是看视频总结出来的重点内容.</p></li><li><p>如果觉得文章描绘的不够清楚，欢迎留言，也可以点击关于我，关注公众号，在公众号内发送关键字 “springboot” 或者 “springBoot” 领取 springBoot 教程。</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> springBoot </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JAVA </tag>
            
            <tag> 微服务 </tag>
            
            <tag> SpringBoot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>springboot 项目初始化的开始和结束</title>
      <link href="/2019/springboot12171121/"/>
      <url>/2019/springboot12171121/</url>
      
        <content type="html"><![CDATA[<p><strong>ApplicationContextInitializer 接口</strong><br>用来初始化 Spring ConfigurableApplicationContext 应用上下文的回调接口，是在 ConfigurableApplicationContext.refresh() 之前调用。<br>该接口典型的应用场景是 web 应用中需要编程方式对应用上下文做初始化。比如，注册属性源 (property sources) 或者针对上下文的环境信息 environment 激活相应的 profile<br><strong>代码实现</strong><br>默认的 application.properties 文件 (默认指定为生产环境)</p><a id="more"></a><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">test.name</span>=default</span><br><span class="line"><span class="attr">spring.profiles.active</span>=prd</span><br></pre></td></tr></table></figure><p>application-dev.properties 文件</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">test.name</span>=dev</span><br></pre></td></tr></table></figure><p>application-prd.properties 文件</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">test.name</span>=prd</span><br></pre></td></tr></table></figure><p>自定义 MyApplicationContextInitializer 实现 ApplicationContextInitializer 接口，重写 initialize 方法</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yxj.spring.Initializer;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.yxj.spring.SpringBootTestRun;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContextInitializer;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ConfigurableApplicationContext;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ProjectName</span>: springBootDemo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Package</span>: com.yxj.spring.Initializer</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: 阿杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@CreateDate</span>: 2019/1/25 22:39</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateUser</span>: 暂无</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateDate</span>: 2019/1/25 22:39</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateRemark</span>: The modified content</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span>: 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyApplicationContextInitializer</span> <span class="keyword">implements</span> <span class="title">ApplicationContextInitializer</span>&lt;<span class="title">ConfigurableApplicationContext</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 1.springBoot执行ApplicationContextInitializer refresh方法之前会先执行</span></span><br><span class="line"><span class="comment">     * 2.在方法中设置活动配置文件为dev(该结果可以从其他途径去获取，这里给定默认值dev)</span></span><br><span class="line"><span class="comment">     * 3.在启动类最后获取name，查看最终结果</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> applicationContext</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">initialize</span><span class="params">(ConfigurableApplicationContext applicationContext)</span> </span>&#123;</span><br><span class="line">        applicationContext.getEnvironment().setActiveProfiles(<span class="string">"dev"</span>);</span><br><span class="line">        System.out.println(<span class="string">"-------初始化---------"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>springBoot 启动类</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">package com.yxj.spring;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.yxj.spring.Initializer.MyApplicationContextInitializer;</span><br><span class="line"><span class="keyword">import</span> com.yxj.spring.monitor.MyApplicationListener;</span><br><span class="line"><span class="keyword">import</span> com.yxj.spring.monitor.MyEvent;</span><br><span class="line"><span class="keyword">import</span> com.yxj.spring.properties.TestProperties;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.<span class="keyword">factory</span>.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContextInitializer;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationListener;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ConfigurableApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Import;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.<span class="built_in">List</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"><span class="markdown">/**</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet"> * </span>@ProjectName: springBootDemo</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet"> * </span>@Package: com.yxj.spring</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet"> * </span>@Description:</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet"> * </span>@Author: 阿杰</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet"> * </span>@CreateDate: 2019/1/18 20:18</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet"> * </span>@UpdateUser: 暂无</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet"> * </span>@UpdateDate: 2019/1/18 20:18</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet"> * </span>@UpdateRemark: The modified content</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet"> * </span>@Version: 1.0</span></span></span><br><span class="line"><span class="comment"><span class="markdown"> */</span></span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">SpringBootTestRun</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value</span>(<span class="string">"<span class="subst">$&#123;test.name&#125;</span>"</span>)</span><br><span class="line">    private <span class="built_in">String</span> testName;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="markdown">/**</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>添加初始化类方式</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>1.springBootTestRun.addInitializers(new MyApplicationContextInitializer());</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>2.通过配置项来指定（context.initiallzer.classes=com.yxj.spring.Initializer.MyApplicationContextInitializer）</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>3.spring.factories机制</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>应用：</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>当外部程序装配这个模块的时候，就能通过该jar包META-INF/services/里的配置文件找到具体的实现类名，并装载实例化，完成模块的注入</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>在日常工作中，我们可能需要实现一些SDK或者Spring Boot Starter给被人使用，这个使用我们就可以使用Factories机制。</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>Factories机制可以让SDK或者Starter的使用只需要很少或者不需要进行配置，只需要在服务中引入我们的jar包。</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>详细使用参考：http://blog.51cto.com/13836814/2134630</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="code">     *</span></span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>@param args</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="code">     */</span></span></span></span><br><span class="line">    public <span class="keyword">static</span> <span class="keyword">void</span> main(<span class="built_in">String</span>[] args) &#123;</span><br><span class="line">        SpringApplication springBootTestRun = <span class="keyword">new</span> SpringApplication(SpringBootTestRun<span class="class">.<span class="keyword">class</span>);</span></span><br><span class="line"><span class="class">        //<span class="title">springBootTestRun</span>.<span class="title">addInitializers</span>(<span class="title">new</span> <span class="title">MyApplicationContextInitializer</span>());</span></span><br><span class="line"><span class="class">        <span class="title">ConfigurableApplicationContext</span> <span class="title">run</span> = <span class="title">springBootTestRun</span>.<span class="title">run</span>(<span class="title">args</span>);</span></span><br><span class="line"><span class="class">        <span class="title">SpringBootTestRun</span> <span class="title">bean</span> = <span class="title">run</span>.<span class="title">getBean</span>(<span class="title">SpringBootTestRun</span>.<span class="title">class</span>);</span></span><br><span class="line"><span class="class">        <span class="title">System</span>.<span class="title">out</span>.<span class="title">println</span>("------------分割线------------");</span></span><br><span class="line"><span class="class">        <span class="title">System</span>.<span class="title">out</span>.<span class="title">println</span>(<span class="title">bean</span>.<span class="title">testName</span>);</span></span><br><span class="line"><span class="class">        <span class="title">run</span>.<span class="title">close</span>();</span></span><br><span class="line"><span class="class">    &#125;</span></span><br><span class="line"><span class="class">&#125;</span></span><br></pre></td></tr></table></figure><p>测试结果</p><figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">--<span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="comment">初始化</span>--<span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">--<span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="comment">分割线</span>--<span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span></span><br><span class="line"><span class="comment">dev</span></span><br></pre></td></tr></table></figure><p><strong>CommandLineRunner 和 ApplicationRunner 接口</strong></p><p>CommandLineRunner、ApplicationRunner 接口是在容器启动成功后的最后一步回调。如果希望在项目启动完成之前，初始化一些操作，可以使用这两个接口。<br>实现</p><ul><li>实现 CommandLineRunner 或者 ApplicationRunner 接口</li><li>实现 run 方法</li><li>通过 @Component 或者其他方式添加到 spring 容器管理中</li><li>可以实现多个，通过 @Order(value = XXX) 的方式，可以实现排序</li></ul><p><strong>CommandLineRunner 接口</strong><br>第一个 CommandLineRunner</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">package</span> com.yxj.spring.runner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.CommandLineRunner;</span><br><span class="line"><span class="keyword">import</span> org.springframework.core.annotation.Order;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ProjectName</span>: springBootDemo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Package</span>: com.yxj.spring.runner</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: 阿杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@CreateDate</span>: 2019/1/25 23:10</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateUser</span>: 暂无</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateDate</span>: 2019/1/25 23:10</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateRemark</span>: The modified content</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span>: 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Order</span>(value = <span class="number">4</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyCommandLineRunner1</span> <span class="keyword">implements</span> <span class="title">CommandLineRunner</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">(String... args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"order value is 4   。MyCommandLineRunner1 run.  get args : "</span>+Arrays.asList(args));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>第二个 CommandLineRunner</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">package</span> com.yxj.spring.runner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.CommandLineRunner;</span><br><span class="line"><span class="keyword">import</span> org.springframework.core.annotation.Order;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ProjectName</span>: springBootDemo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Package</span>: com.yxj.spring.runner</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: 阿杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@CreateDate</span>: 2019/1/25 23:10</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateUser</span>: 暂无</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateDate</span>: 2019/1/25 23:10</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateRemark</span>: The modified content</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span>: 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Order</span>(value = <span class="number">1</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyCommandLineRunner2</span> <span class="keyword">implements</span> <span class="title">CommandLineRunner</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">(String... args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"order value is 1   。MyCommandLineRunner2 run.  get args : "</span>+Arrays.asList(args));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>第一个 ApplicationRunner</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">package</span> com.yxj.spring.runner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.ApplicationArguments;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.ApplicationRunner;</span><br><span class="line"><span class="keyword">import</span> org.springframework.core.annotation.Order;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ProjectName</span>: springBootDemo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Package</span>: com.yxj.spring.runner</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: 阿杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@CreateDate</span>: 2019/1/25 23:27</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateUser</span>: 暂无</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateDate</span>: 2019/1/25 23:27</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateRemark</span>: The modified content</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span>: 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Order</span>(value = <span class="number">3</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyApplicationRunner1</span> <span class="keyword">implements</span> <span class="title">ApplicationRunner</span> &#123;</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> run(ApplicationArguments args) <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="keyword">for</span>(String <span class="string">argsString :</span>args.getOptionNames())&#123;</span><br><span class="line">            System.out.println(<span class="string">"order value is 3   。MyApplicationRunner1 is ApplicationArguments key : ("</span>+argsString + <span class="string">")   ApplicationArguments value : ("</span>+args.getOptionValues(argsString)+<span class="string">")"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>第二个 ApplicationRunner</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">package</span> com.yxj.spring.runner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.ApplicationArguments;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.ApplicationRunner;</span><br><span class="line"><span class="keyword">import</span> org.springframework.core.annotation.Order;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ProjectName</span>: springBootDemo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Package</span>: com.yxj.spring.runner</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: 阿杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@CreateDate</span>: 2019/1/25 23:27</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateUser</span>: 暂无</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateDate</span>: 2019/1/25 23:27</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateRemark</span>: The modified content</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span>: 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Order</span>(value = <span class="number">2</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyApplicationRunner2</span> <span class="keyword">implements</span> <span class="title">ApplicationRunner</span> &#123;</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> run(ApplicationArguments args) <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="keyword">for</span>(String <span class="string">argsString :</span>args.getOptionNames())&#123;</span><br><span class="line">            System.out.println(<span class="string">"order value is 2   。MyApplicationRunner2 is ApplicationArguments key : ("</span>+argsString + <span class="string">")   ApplicationArguments value : ("</span>+args.getOptionValues(argsString)+<span class="string">")"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>springBoot 测试启动类</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">package</span> com.yxj.spring;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.yxj.spring.Initializer.MyApplicationContextInitializer;</span><br><span class="line"><span class="keyword">import</span> com.yxj.spring.monitor.MyApplicationListener;</span><br><span class="line"><span class="keyword">import</span> com.yxj.spring.monitor.MyEvent;</span><br><span class="line"><span class="keyword">import</span> com.yxj.spring.properties.TestProperties;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.CommandLineRunner;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContextInitializer;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationListener;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ConfigurableApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Import;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ProjectName</span>: springBootDemo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Package</span>: com.yxj.spring</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: 阿杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@CreateDate</span>: 2019/1/18 20:18</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateUser</span>: 暂无</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateDate</span>: 2019/1/18 20:18</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateRemark</span>: The modified content</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span>: 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringBootTestRun</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value</span>(<span class="string">"$&#123;test.name&#125;"</span>)</span><br><span class="line">    <span class="keyword">private</span> String testName;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication springBootTestRun = <span class="keyword">new</span> SpringApplication(SpringBootTestRun<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        ConfigurableApplicationContext run = springBootTestRun.run(<span class="string">"测试1"</span>,<span class="string">"测试2"</span>,<span class="string">"--key1=测试3"</span>,<span class="string">"--key2=测试4"</span>);</span><br><span class="line">        run.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>测试结果</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">order</span> <span class="keyword">value</span> <span class="keyword">is</span> <span class="number">1</span>   。MyCommandLineRunner2 run.  <span class="keyword">get</span> args : [测试<span class="number">1</span>, 测试<span class="number">2</span>, <span class="comment">--key1=测试3, --key2=测试4]</span></span><br><span class="line"><span class="keyword">order</span> <span class="keyword">value</span> <span class="keyword">is</span> <span class="number">2</span>   。MyApplicationRunner2 <span class="keyword">is</span> ApplicationArguments key : (key1)   ApplicationArguments <span class="keyword">value</span> : ([测试<span class="number">3</span>])</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">value</span> <span class="keyword">is</span> <span class="number">2</span>   。MyApplicationRunner2 <span class="keyword">is</span> ApplicationArguments key : (key2)   ApplicationArguments <span class="keyword">value</span> : ([测试<span class="number">4</span>])</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">value</span> <span class="keyword">is</span> <span class="number">3</span>   。MyApplicationRunner1 <span class="keyword">is</span> ApplicationArguments key : (key1)   ApplicationArguments <span class="keyword">value</span> : ([测试<span class="number">3</span>])</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">value</span> <span class="keyword">is</span> <span class="number">3</span>   。MyApplicationRunner1 <span class="keyword">is</span> ApplicationArguments key : (key2)   ApplicationArguments <span class="keyword">value</span> : ([测试<span class="number">4</span>])</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">value</span> <span class="keyword">is</span> <span class="number">4</span>   。MyCommandLineRunner1 run.  <span class="keyword">get</span> args : [测试<span class="number">1</span>, 测试<span class="number">2</span>, <span class="comment">--key1=测试3, --key2=测试4]</span></span><br></pre></td></tr></table></figure><p><strong>对比</strong></p><ul><li>两个都是在容器启动成功后的最后一步回调</li><li>CommandLineRunner 的参数是最原始的参数，没有做任何处理。ApplicationRunner 的参数是 ApplicationArguments，是对原始参数做了进一步的封装。</li><li>ApplicationRunner 只对–key=value 这种形式做解析，CommandLineRunner 可以获得传递的所有字符串</li></ul><h2 id="声明"><a href="#声明" class="headerlink" title="声明"></a>声明</h2><ul><li><p>本人是与 springBoot 教学视频同步学习，此文章是看视频总结出来的重点内容.</p></li><li><p>如果觉得文章描绘的不够清楚，欢迎留言，也可以点击关于我，关注公众号，在公众号内发送关键字 “springboot” 或者 “springBoot” 领取 springBoot 教程。</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> springBoot </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JAVA </tag>
            
            <tag> 微服务 </tag>
            
            <tag> SpringBoot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>springBoot 事件监听和部分注解的运用</title>
      <link href="/2019/springboot10201121/"/>
      <url>/2019/springboot10201121/</url>
      
        <content type="html"><![CDATA[<h3 id="ConfigurationProperties-注解的使用"><a href="#ConfigurationProperties-注解的使用" class="headerlink" title="@ConfigurationProperties 注解的使用"></a>@ConfigurationProperties 注解的使用</h3><p>用处</p><ul><li>根据类型校验和管理 application 中的 bean</li></ul><a id="more"></a><p>举例使用</p><p>application.properties 的内容</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">test.name</span>=default</span><br><span class="line"><span class="attr">test.age</span>=<span class="number">19</span></span><br><span class="line"><span class="attr">test.friends[0]</span>=Ben</span><br><span class="line"><span class="attr">test.friends[1]</span>=Alice</span><br><span class="line"><span class="attr">test.utils[0]</span>=DateUtils</span><br><span class="line"><span class="attr">test.utils[1]</span>=TimeUtils</span><br><span class="line"><span class="attr">test.name</span>=default</span><br><span class="line"><span class="attr">test.age</span>=<span class="number">19</span></span><br><span class="line"><span class="attr">test.friends[0]</span>=Ben</span><br><span class="line"><span class="attr">test.friends[1]</span>=Alice</span><br><span class="line"><span class="attr">test.utils[0]</span>=DateUtils</span><br><span class="line"><span class="attr">test.utils[1]</span>=TimeUtils</span><br></pre></td></tr></table></figure><p>新建 TestProperties 用来接收配置的内容</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br></pre></td><td class="code"><pre><span class="line">package com.yxj.spring.properties;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.context.properties.ConfigurationProperties;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.PropertySource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @ProjectName: springBootDemo</span></span><br><span class="line"><span class="comment"> * @Package: com.yxj.spring.properties</span></span><br><span class="line"><span class="comment"> * @Description: @ConfigurationProperties(prefix="test")，该注解会自动，将配置文件前缀是test的各项，加载至该bean中</span></span><br><span class="line"><span class="comment"> * @Author: 阿杰</span></span><br><span class="line"><span class="comment"> * @CreateDate: 2019/1/23 20:00</span></span><br><span class="line"><span class="comment"> * @UpdateUser: 暂无</span></span><br><span class="line"><span class="comment"> * @UpdateDate: 2019/1/23 20:00</span></span><br><span class="line"><span class="comment"> * @UpdateRemark: The modified content</span></span><br><span class="line"><span class="comment"> * @Version: 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">@ConfigurationProperties(prefix="test")</span><br><span class="line"><span class="built_in">public</span> <span class="keyword">class</span> TestProperties &#123;</span><br><span class="line">    private String age;</span><br><span class="line">    private String <span class="type">name</span>;</span><br><span class="line">    private String[] friends;</span><br><span class="line">    private List&lt;String&gt; utils;</span><br><span class="line">    <span class="built_in">public</span> String[] getFriends() &#123;</span><br><span class="line">        <span class="keyword">return</span> friends;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">public</span> TestProperties setFriends(String[] friends) &#123;</span><br><span class="line">        this.friends = friends;</span><br><span class="line">        <span class="keyword">return</span> this;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">public</span> String getAge() &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">public</span> TestProperties setAge(String age) &#123;</span><br><span class="line">        this.age = age;</span><br><span class="line">        <span class="keyword">return</span> this;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">public</span> String getName() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="type">name</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">public</span> TestProperties setName(String <span class="type">name</span>) &#123;</span><br><span class="line">        this.name = <span class="type">name</span>;</span><br><span class="line">        <span class="keyword">return</span> this;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">public</span> List&lt;String&gt; getUtils() &#123;</span><br><span class="line">        <span class="keyword">return</span> utils;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">public</span> TestProperties setUtils(List&lt;String&gt; utils) &#123;</span><br><span class="line">        this.utils = utils;</span><br><span class="line">        <span class="keyword">return</span> this;</span><br><span class="line">    &#125;</span><br><span class="line">    @Override</span><br><span class="line">    <span class="built_in">public</span> String toString() &#123;</span><br><span class="line">        <span class="keyword">return</span> "TestProperties&#123;" +</span><br><span class="line">                "age='" + age + <span class="string">'\'' +</span></span><br><span class="line"><span class="string">                ",  + name + '</span>\<span class="string">''</span> +</span><br><span class="line">                ", friends=" + Arrays.toString(friends) +</span><br><span class="line">                ", utils=" + utils +</span><br><span class="line">                <span class="string">'&#125;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">package com.yxj.spring.properties;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.context.properties.ConfigurationProperties;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.PropertySource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @ProjectName: springBootDemo</span></span><br><span class="line"><span class="comment"> * @Package: com.yxj.spring.properties</span></span><br><span class="line"><span class="comment"> * @Description: @ConfigurationProperties(prefix="test")，该注解会自动，将配置文件前缀是test的各项，加载至该bean中</span></span><br><span class="line"><span class="comment"> * @Author: 阿杰</span></span><br><span class="line"><span class="comment"> * @CreateDate: 2019/1/23 20:00</span></span><br><span class="line"><span class="comment"> * @UpdateUser: 暂无</span></span><br><span class="line"><span class="comment"> * @UpdateDate: 2019/1/23 20:00</span></span><br><span class="line"><span class="comment"> * @UpdateRemark: The modified content</span></span><br><span class="line"><span class="comment"> * @Version: 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">@ConfigurationProperties(prefix="test")</span><br><span class="line"><span class="built_in">public</span> <span class="keyword">class</span> TestProperties &#123;</span><br><span class="line">    private String age;</span><br><span class="line"> </span><br><span class="line">    private String <span class="type">name</span>;</span><br><span class="line"> </span><br><span class="line">    private String[] friends;</span><br><span class="line"> </span><br><span class="line">    private List&lt;String&gt; utils;</span><br><span class="line"> </span><br><span class="line">    <span class="built_in">public</span> String[] getFriends() &#123;</span><br><span class="line">        <span class="keyword">return</span> friends;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="built_in">public</span> TestProperties setFriends(String[] friends) &#123;</span><br><span class="line">        this.friends = friends;</span><br><span class="line">        <span class="keyword">return</span> this;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="built_in">public</span> String getAge() &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="built_in">public</span> TestProperties setAge(String age) &#123;</span><br><span class="line">        this.age = age;</span><br><span class="line">        <span class="keyword">return</span> this;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="built_in">public</span> String getName() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="type">name</span>;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="built_in">public</span> TestProperties setName(String <span class="type">name</span>) &#123;</span><br><span class="line">        this.name = <span class="type">name</span>;</span><br><span class="line">        <span class="keyword">return</span> this;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="built_in">public</span> List&lt;String&gt; getUtils() &#123;</span><br><span class="line">        <span class="keyword">return</span> utils;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="built_in">public</span> TestProperties setUtils(List&lt;String&gt; utils) &#123;</span><br><span class="line">        this.utils = utils;</span><br><span class="line">        <span class="keyword">return</span> this;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    @Override</span><br><span class="line">    <span class="built_in">public</span> String toString() &#123;</span><br><span class="line">        <span class="keyword">return</span> "TestProperties&#123;" +</span><br><span class="line">                "age='" + age + <span class="string">'\'' +</span></span><br><span class="line"><span class="string">                ",  + name + '</span>\<span class="string">''</span> +</span><br><span class="line">                ", friends=" + Arrays.toString(friends) +</span><br><span class="line">                ", utils=" + utils +</span><br><span class="line">                <span class="string">'&#125;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>springboot 启动类</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yxj.spring;</span><br><span class="line"><span class="keyword">import</span> com.yxj.spring.properties.TestProperties;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ConfigurableApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.<span class="keyword">annotation</span>.Import;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ProjectName</span>: springBootDemo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Package</span>: com.yxj.spring</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: 阿杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@CreateDate</span>: 2019/1/18 20:18</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateUser</span>: 暂无</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateDate</span>: 2019/1/18 20:18</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateRemark</span>: The modified content</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span>: 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Import(TestProperties.class)</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringBootTestRun</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * getBeansOfType(MakeApp.class)会装配bean类型是MakeApp的所有实例</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> args</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> static void main(String[] args) &#123;</span><br><span class="line">        ConfigurableApplicationContext run = SpringApplication.run(SpringBootTestRun<span class="class">.<span class="keyword">class</span>, <span class="type">args);</span></span></span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">"------------------分割线------------------"</span>);</span><br><span class="line">        System.<span class="keyword">out</span>.println(run.getBean(TestProperties<span class="class">.<span class="keyword">class</span>));</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">package</span> com.yxj.spring;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> com.yxj.spring.properties.TestProperties;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ConfigurableApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.<span class="keyword">annotation</span>.Import;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ProjectName</span>: springBootDemo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Package</span>: com.yxj.spring</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: 阿杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@CreateDate</span>: 2019/1/18 20:18</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateUser</span>: 暂无</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateDate</span>: 2019/1/18 20:18</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateRemark</span>: The modified content</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span>: 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Import(TestProperties.class)</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringBootTestRun</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * getBeansOfType(MakeApp.class)会装配bean类型是MakeApp的所有实例</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> args</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> static void main(String[] args) &#123;</span><br><span class="line">        ConfigurableApplicationContext run = SpringApplication.run(SpringBootTestRun<span class="class">.<span class="keyword">class</span>, <span class="type">args);</span></span></span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">"------------------分割线------------------"</span>);</span><br><span class="line">        System.<span class="keyword">out</span>.println(run.getBean(TestProperties<span class="class">.<span class="keyword">class</span>));</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>测试结果</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">------------------分割线------------------</span><br><span class="line">TestProperties&#123;<span class="attribute">age</span>=<span class="string">'19'</span>, <span class="attribute">name</span>=<span class="string">'default'</span>, friends=[Ben, Alice], utils=[DateUtils, TimeUtils]&#125;</span><br><span class="line">------------------分割线------------------</span><br><span class="line">TestProperties&#123;<span class="attribute">age</span>=<span class="string">'19'</span>, <span class="attribute">name</span>=<span class="string">'default'</span>, friends=[Ben, Alice], utils=[DateUtils, TimeUtils]&#125;</span><br></pre></td></tr></table></figure><p>注意：</p><ul><li><p>@ConfigurationProperties(prefix=”test”)，该注解会自动，将配置文件前缀是 test 的各项，加载至该 bean 中</p></li><li><p>需要给定各个属性值的 get，set 方法</p></li><li><p>名字需要与配置项的 key 值对应</p></li><li><p>可以加载数组，集合</p></li><li><p>需要 @Component 注解或者其他方式将该类交由 spring 管理</p></li></ul><h3 id="EnableAutoConfiguration-注解的使用"><a href="#EnableAutoConfiguration-注解的使用" class="headerlink" title="@EnableAutoConfiguration 注解的使用"></a>@EnableAutoConfiguration 注解的使用</h3><p>解析</p><p>1.springBoot 启动类会使用 @SpringBootApplication<br>2. 点进入源代码发现改注解是一个复合注解，由好几个注解共同组合而成</p><ul><li><p>@SpringBootConfiguration 标注当前类是配置类，并会将当前类内声明的一个或多个以 @Bean 注解标记的方法的实例纳入到 spring 容器中，并且实例名就是方法名。</p></li><li><p>@EnableAutoConfiguration，自动配置注解，自动载入应用程序所需的所有 Bean</p></li><li><p>@ComponentScan：默认扫描 @SpringBootApplication 所在类的同级目录以及它的子目录。这也就是 springBoot 启动类建立在项目根目录的原因</p></li></ul><p>尝试</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yxj.spring;</span><br><span class="line"><span class="keyword">import</span> com.yxj.spring.properties.TestProperties;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.EnableAutoConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ConfigurableApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.<span class="keyword">annotation</span>.Import;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ProjectName</span>: springBootDemo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Package</span>: com.yxj.spring</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: 阿杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@CreateDate</span>: 2019/1/18 20:18</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateUser</span>: 暂无</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateDate</span>: 2019/1/18 20:18</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateRemark</span>: The modified content</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span>: 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Import(TestProperties.class)</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringBootTestRun</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> static void main(String[] args) &#123;</span><br><span class="line">        ConfigurableApplicationContext run = SpringApplication.run(SpringBootTestRun<span class="class">.<span class="keyword">class</span>, <span class="type">args);</span></span></span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">"------------------分割线------------------"</span>);</span><br><span class="line">        System.<span class="keyword">out</span>.println(run.getBean(TestProperties<span class="class">.<span class="keyword">class</span>));</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">package</span> com.yxj.spring;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> com.yxj.spring.properties.TestProperties;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.EnableAutoConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ConfigurableApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.<span class="keyword">annotation</span>.Import;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ProjectName</span>: springBootDemo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Package</span>: com.yxj.spring</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: 阿杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@CreateDate</span>: 2019/1/18 20:18</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateUser</span>: 暂无</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateDate</span>: 2019/1/18 20:18</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateRemark</span>: The modified content</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span>: 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Import(TestProperties.class)</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringBootTestRun</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> static void main(String[] args) &#123;</span><br><span class="line">        ConfigurableApplicationContext run = SpringApplication.run(SpringBootTestRun<span class="class">.<span class="keyword">class</span>, <span class="type">args);</span></span></span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">"------------------分割线------------------"</span>);</span><br><span class="line">        System.<span class="keyword">out</span>.println(run.getBean(TestProperties<span class="class">.<span class="keyword">class</span>));</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>输出结果</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">------------------分割线------------------</span><br><span class="line">TestProperties&#123;<span class="attribute">age</span>=<span class="string">'19'</span>, <span class="attribute">name</span>=<span class="string">'default'</span>, friends=[Ben, Alice], utils=[DateUtils, TimeUtils]&#125;</span><br><span class="line">------------------分割线------------------</span><br><span class="line">TestProperties&#123;<span class="attribute">age</span>=<span class="string">'19'</span>, <span class="attribute">name</span>=<span class="string">'default'</span>, friends=[Ben, Alice], utils=[DateUtils, TimeUtils]&#125;</span><br></pre></td></tr></table></figure><p>总结</p><p>将 @SpringBootApplication 替换为 @EnableAutoConfiguration，还是能正常输出 spring 管理的 bean 对象<br>@EnableAutoConfiguration 注解导入了 AutoConfigurationImportSelector 类，最终的接口类是 ImportSelector<br>源代码注释解释了，ImportSelector 该接口的方法的返回值都会被纳入到 spring 容器管理中<br>ImportSelector 的具体使用与自定义，可以查看大佬博客 <a href="https://blog.csdn.net/weixin_34452850/article/details/82883033" target="_blank" rel="external nofollow noopener noreferrer">https://blog.csdn.net/weixin_34452850/article/details/82883033</a></p><h3 id="springBoot-事件监听"><a href="#springBoot-事件监听" class="headerlink" title="springBoot 事件监听"></a>springBoot 事件监听</h3><p>步骤</p><ul><li><p>自定义事件，一般是继承 ApplicationEvent 抽象类</p></li><li><p>Spring 的事件监听器接口，所有的监听器都实现了 ApplicationListener 接口</p></li><li><p>发布事件</p></li></ul><p>代码实现</p><p>定义自定义事件</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yxj.spring.monitor;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationEvent;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ProjectName</span>: springBootDemo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Package</span>: com.yxj.spring.monitor</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: 定义事件</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: 阿杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@CreateDate</span>: 2019/1/23 22:16</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateUser</span>: 暂无</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateDate</span>: 2019/1/23 22:16</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateRemark</span>: The modified content</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span>: 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyEvent</span> <span class="keyword">extends</span> <span class="title">ApplicationEvent</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Create a new ApplicationEvent.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> source the object on which the event initially occurred (never &#123;<span class="doctag">@code</span> null&#125;)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyEvent</span><span class="params">(String source)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(source);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">package</span> com.yxj.spring.monitor;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationEvent;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ProjectName</span>: springBootDemo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Package</span>: com.yxj.spring.monitor</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: 定义事件</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: 阿杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@CreateDate</span>: 2019/1/23 22:16</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateUser</span>: 暂无</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateDate</span>: 2019/1/23 22:16</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateRemark</span>: The modified content</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span>: 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyEvent</span> <span class="keyword">extends</span> <span class="title">ApplicationEvent</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Create a new ApplicationEvent.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> source the object on which the event initially occurred (never &#123;<span class="doctag">@code</span> null&#125;)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyEvent</span><span class="params">(String source)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(source);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>定义事件监听器</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yxj.spring.monitor;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationListener;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ProjectName</span>: springBootDemo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Package</span>: com.yxj.spring.monitor</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: 定义事件监听器</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: 阿杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@CreateDate</span>: 2019/1/23 22:18</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateUser</span>: 暂无</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateDate</span>: 2019/1/23 22:18</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateRemark</span>: The modified content</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span>: 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyApplicationListener</span> <span class="keyword">implements</span> <span class="title">ApplicationListener</span>&lt;<span class="title">MyEvent</span>&gt; </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onApplicationEvent</span><span class="params">(MyEvent event)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"接收到事件:"</span>+event.getClass());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">package</span> com.yxj.spring.monitor;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationListener;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ProjectName</span>: springBootDemo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Package</span>: com.yxj.spring.monitor</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: 定义事件监听器</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: 阿杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@CreateDate</span>: 2019/1/23 22:18</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateUser</span>: 暂无</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateDate</span>: 2019/1/23 22:18</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateRemark</span>: The modified content</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span>: 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyApplicationListener</span> <span class="keyword">implements</span> <span class="title">ApplicationListener</span>&lt;<span class="title">MyEvent</span>&gt; </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onApplicationEvent</span><span class="params">(MyEvent event)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"接收到事件:"</span>+event.getClass());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>springBoot 启动类</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yxj.spring;</span><br><span class="line"><span class="keyword">import</span> com.yxj.spring.monitor.MyApplicationListener;</span><br><span class="line"><span class="keyword">import</span> com.yxj.spring.monitor.MyEvent;</span><br><span class="line"><span class="keyword">import</span> com.yxj.spring.properties.TestProperties;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationListener;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ConfigurableApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Import;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ProjectName</span>: springBootDemo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Package</span>: com.yxj.spring</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: 阿杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@CreateDate</span>: 2019/1/18 20:18</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateUser</span>: 暂无</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateDate</span>: 2019/1/18 20:18</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateRemark</span>: The modified content</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span>: 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Import</span>(TestProperties<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class">@<span class="title">SpringBootApplication</span></span></span><br><span class="line"><span class="class"><span class="title">public</span> <span class="title">class</span> <span class="title">SpringBootTestRun</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        ApplicationListener myApplicationListener = <span class="keyword">new</span> MyApplicationListener();</span><br><span class="line">        MyEvent myEvent = <span class="keyword">new</span> MyEvent(<span class="string">""</span>);</span><br><span class="line">        SpringApplication springBootTestRun = <span class="keyword">new</span> SpringApplication(SpringBootTestRun<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        springBootTestRun.addListeners(myApplicationListener);</span><br><span class="line">        ConfigurableApplicationContext run = springBootTestRun.run(args);</span><br><span class="line">        run.publishEvent(myEvent);</span><br><span class="line">        run.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">package</span> com.yxj.spring;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> com.yxj.spring.monitor.MyApplicationListener;</span><br><span class="line"><span class="keyword">import</span> com.yxj.spring.monitor.MyEvent;</span><br><span class="line"><span class="keyword">import</span> com.yxj.spring.properties.TestProperties;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationListener;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ConfigurableApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Import;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ProjectName</span>: springBootDemo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Package</span>: com.yxj.spring</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: 阿杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@CreateDate</span>: 2019/1/18 20:18</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateUser</span>: 暂无</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateDate</span>: 2019/1/18 20:18</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateRemark</span>: The modified content</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span>: 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Import</span>(TestProperties<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class">@<span class="title">SpringBootApplication</span></span></span><br><span class="line"><span class="class"><span class="title">public</span> <span class="title">class</span> <span class="title">SpringBootTestRun</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        ApplicationListener myApplicationListener = <span class="keyword">new</span> MyApplicationListener();</span><br><span class="line">        MyEvent myEvent = <span class="keyword">new</span> MyEvent(<span class="string">""</span>);</span><br><span class="line">        SpringApplication springBootTestRun = <span class="keyword">new</span> SpringApplication(SpringBootTestRun<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        springBootTestRun.addListeners(myApplicationListener);</span><br><span class="line">        ConfigurableApplicationContext run = springBootTestRun.run(args);</span><br><span class="line">        run.publishEvent(myEvent);</span><br><span class="line">        run.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>测试结果</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">接收到事件<span class="selector-pseudo">:class</span> <span class="selector-tag">com</span><span class="selector-class">.yxj</span><span class="selector-class">.spring</span><span class="selector-class">.monitor</span><span class="selector-class">.MyEvent</span></span><br></pre></td></tr></table></figure><p>重点</p><p>将监听器添加至 spring 容器管理几种方式<br>1.springBootTestRun.addListeners(myApplicationListener);<br>2. 在类上面加入 @Component 注解，@Service 等注解<br>3. 在 application.properties 添加参数 context.listener.classes = 监听器类的项目全路径<br>4. 通过 @Eventlistener 注解，方法参数为监听的类 ApplicationEvent 或者其子类，一些自定义的监听器，或者 springBoot 系统启动时加载初始化信息等都可以通过 ApplicationEvent + 改变参数来实现监听</p><h2 id="声明"><a href="#声明" class="headerlink" title="声明"></a>声明</h2><ul><li><p>本人是与 springBoot 教学视频同步学习，此文章是看视频总结出来的重点内容.</p></li><li><p>如果觉得文章描绘的不够清楚，欢迎留言，也可以点击关于我，关注公众号，在公众号内发送关键字 “springboot” 或者 “springBoot” 领取 springBoot 教程。</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> springBoot </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JAVA </tag>
            
            <tag> 微服务 </tag>
            
            <tag> SpringBoot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>springboot 配置环境动态切换和部分注解的运用</title>
      <link href="/2019/springboot10151121/"/>
      <url>/2019/springboot10151121/</url>
      
        <content type="html"><![CDATA[<h3 id="springBoot-配置环境动态切换"><a href="#springBoot-配置环境动态切换" class="headerlink" title="springBoot 配置环境动态切换"></a>springBoot 配置环境动态切换</h3><p>建立第一个配置文件（springBoot 默认读取的文件）application.properties</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">test.name</span>=default</span><br><span class="line"><span class="attr">test.defaultAge</span>=<span class="number">12</span></span><br><span class="line"><span class="attr">test.name</span>=default</span><br><span class="line"><span class="attr">test.defaultAge</span>=<span class="number">12</span></span><br></pre></td></tr></table></figure><p>建立第二个配置文件（开发环境）application-dev.properties</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">test.name</span>=dev</span><br><span class="line"><span class="attr">test.devAge</span>=<span class="number">13</span></span><br><span class="line"><span class="attr">test.name</span>=dev</span><br><span class="line"><span class="attr">test.devAge</span>=<span class="number">13</span></span><br></pre></td></tr></table></figure><p>建立第三个配置文件（用户验收测试环境）application-uat.properties</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">test.name</span>=uat</span><br><span class="line"><span class="attr">test.uatAge</span>=<span class="number">14</span></span><br><span class="line"><span class="attr">test.name</span>=uat</span><br><span class="line"><span class="attr">test.uatAge</span>=<span class="number">14</span></span><br></pre></td></tr></table></figure><ol><li>添加启动参数 (–spring.profiles.active=), 测试结果读取 application.properties 的值  </li><li>添加启动参数 (–spring.profiles.active=dev), 测试结果读取 application-dev.properties 的值  </li><li>添加启动参数 (–spring.profiles.active=uat), 测试结果读取 application-uat.properties 的值  </li><li>添加启动参数 (–spring.profiles.active=uat,dev), 测试结果读取 application-dev.properties 的值  </li><li>添加启动参数 (–spring.profiles.active=dev,uat), 测试结果读取 application-uat.properties 的值  </li><li>添加启动参数 (–spring.profiles.active=dev)，可以读到 application.properties 的(test.defaultAge) 值，读不到 uat 的 (test.uatAge) 值。  </li><li>添加启动参数 (–spring.profiles.active=uat)，可以读到 application.properties 的(test.defaultAge) 值，读不到 dev 的 (test.devAge) 值。  </li><li>添加启动参数 (–spring.profiles.active=), 可以读到 application.properties 的值，读取不到其他配置文件的值</li></ol><a id="more"></a><p>重点</p><ul><li>添加启动参数 –spring.profiles.active=“环境代表参数”（此值为文件名 “-” 与“.”中间的值，此处即为 dev 或者 uat）</li><li>可以添加多个参数，通过英文逗号（,）分割</li><li>如果添加多个参数，有重复 key，值会被覆盖，（配置文件加载顺序详见<a href="https://docs.spring.io/spring-boot/docs/2.1.2.RELEASE/reference/htmlsingle/#boot-features-external-config" target="_blank" rel="external nofollow noopener noreferrer">官方文档</a>：24. Externalized Configuration）</li><li>也可以直接在 application.properties 配置文件中添加 spring.profiles.active=“环境代表参数” 来替代启动时候添加的参数</li></ul><h3 id="springBoot-自动配置-bean（-Conditional-注解使用）"><a href="#springBoot-自动配置-bean（-Conditional-注解使用）" class="headerlink" title="springBoot 自动配置 bean（@Conditional 注解使用）"></a>springBoot 自动配置 bean（@Conditional 注解使用）</h3><p>首先看一个正常配置的 bean 与打印</p><p>建立一个接口</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">package com.yxj.spring;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ProjectName</span>: springBootDemo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Package</span>: com.yxj.spring</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>:     阿杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@CreateDate</span>: 2019/1/22 22:08</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateUser</span>: 暂无</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateDate</span>: 2019/1/22 22:08</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateRemark</span>: The modified content</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span>: 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">MakeApp</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line">package com.yxj.spring;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ProjectName</span>: springBootDemo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Package</span>: com.yxj.spring</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>:     阿杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@CreateDate</span>: 2019/1/22 22:08</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateUser</span>: 暂无</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateDate</span>: 2019/1/22 22:08</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateRemark</span>: The modified content</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span>: 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">MakeApp</span> </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>建立两个实现 - 第一个</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">package com.yxj.spring;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ProjectName</span>: springBootDemo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Package</span>: com.yxj.spring</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: 阿杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@CreateDate</span>: 2019/1/22 22:13</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateUser</span>: 暂无</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateDate</span>: 2019/1/22 22:13</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateRemark</span>: The modified content</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span>: 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Wechat</span> <span class="keyword">implements</span> <span class="title">MakeApp</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line">package com.yxj.spring;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ProjectName</span>: springBootDemo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Package</span>: com.yxj.spring</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: 阿杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@CreateDate</span>: 2019/1/22 22:13</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateUser</span>: 暂无</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateDate</span>: 2019/1/22 22:13</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateRemark</span>: The modified content</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span>: 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Wechat</span> <span class="keyword">implements</span> <span class="title">MakeApp</span> </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>建立两个实现 - 第二个</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">package com.yxj.spring;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ProjectName</span>: springBootDemo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Package</span>: com.yxj.spring</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: 阿杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@CreateDate</span>: 2019/1/22 22:14</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateUser</span>: 暂无</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateDate</span>: 2019/1/22 22:14</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateRemark</span>: The modified content</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span>: 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PipiXia</span> <span class="keyword">implements</span> <span class="title">MakeApp</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line">package com.yxj.spring;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ProjectName</span>: springBootDemo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Package</span>: com.yxj.spring</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: 阿杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@CreateDate</span>: 2019/1/22 22:14</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateUser</span>: 暂无</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateDate</span>: 2019/1/22 22:14</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateRemark</span>: The modified content</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span>: 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PipiXia</span> <span class="keyword">implements</span> <span class="title">MakeApp</span> </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>通过 @SpringBootConfiguration 与 @Bean 加载 bean</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yxj.spring;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringBootConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ProjectName</span>: springBootDemo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Package</span>: com.yxj.spring</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:  <span class="doctag">@SpringBootConfiguration</span>继承自<span class="doctag">@Configuration</span>，</span></span><br><span class="line"><span class="comment"> * 二者功能也一致，标注当前类是配置类，</span></span><br><span class="line"><span class="comment"> * 并会将当前类内声明的一个或多个以<span class="doctag">@Bean</span>注解标记的方法的实例纳入到spring容器中，</span></span><br><span class="line"><span class="comment"> * 并且实例名就是方法名。</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: 阿杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@CreateDate</span>: 2019/1/22 22:14</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateUser</span>: 暂无</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateDate</span>: 2019/1/22 22:14</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateRemark</span>: The modified content</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span>: 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@SpringBootConfiguration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoadMyBean</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> MakeApp <span class="title">createWechat</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Wechat();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> MakeApp <span class="title">createPipiXia</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> PipiXia();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">package</span> com.yxj.spring;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringBootConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ProjectName</span>: springBootDemo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Package</span>: com.yxj.spring</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:  <span class="doctag">@SpringBootConfiguration</span>继承自<span class="doctag">@Configuration</span>，</span></span><br><span class="line"><span class="comment"> * 二者功能也一致，标注当前类是配置类，</span></span><br><span class="line"><span class="comment"> * 并会将当前类内声明的一个或多个以<span class="doctag">@Bean</span>注解标记的方法的实例纳入到spring容器中，</span></span><br><span class="line"><span class="comment"> * 并且实例名就是方法名。</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: 阿杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@CreateDate</span>: 2019/1/22 22:14</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateUser</span>: 暂无</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateDate</span>: 2019/1/22 22:14</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateRemark</span>: The modified content</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span>: 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@SpringBootConfiguration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoadMyBean</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> MakeApp <span class="title">createWechat</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Wechat();</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> MakeApp <span class="title">createPipiXia</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> PipiXia();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>springBoot 启动类测试</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yxj.spring;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.<span class="keyword">annotation</span>.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.context.properties.ConfigurationProperties;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ConfigurableApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.<span class="keyword">annotation</span>.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.<span class="keyword">annotation</span>.Condition;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.<span class="keyword">annotation</span>.PropertySource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.<span class="keyword">annotation</span>.PropertySources;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ProjectName</span>: springBootDemo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Package</span>: com.yxj.spring</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: 杨小杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@CreateDate</span>: 2019/1/18 20:18</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateUser</span>: 暂无</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateDate</span>: 2019/1/18 20:18</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateRemark</span>: The modified content</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span>: 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringBootTestRun</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * getBeansOfType(MakeApp.class)会装配bean类型是MakeApp的所有实例</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> args</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> static void main(String[] args) &#123;</span><br><span class="line">        ConfigurableApplicationContext run = SpringApplication.run(SpringBootTestRun<span class="class">.<span class="keyword">class</span>, <span class="type">args);</span></span></span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">"------------------分割线------------------"</span>);</span><br><span class="line">        System.<span class="keyword">out</span>.println(run.getBeansOfType(MakeApp<span class="class">.<span class="keyword">class</span>));</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">package</span> com.yxj.spring;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.<span class="keyword">annotation</span>.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.context.properties.ConfigurationProperties;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ConfigurableApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.<span class="keyword">annotation</span>.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.<span class="keyword">annotation</span>.Condition;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.<span class="keyword">annotation</span>.PropertySource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.<span class="keyword">annotation</span>.PropertySources;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ProjectName</span>: springBootDemo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Package</span>: com.yxj.spring</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: 杨小杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@CreateDate</span>: 2019/1/18 20:18</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateUser</span>: 暂无</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateDate</span>: 2019/1/18 20:18</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateRemark</span>: The modified content</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span>: 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringBootTestRun</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * getBeansOfType(MakeApp.class)会装配bean类型是MakeApp的所有实例</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> args</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> static void main(String[] args) &#123;</span><br><span class="line">        ConfigurableApplicationContext run = SpringApplication.run(SpringBootTestRun<span class="class">.<span class="keyword">class</span>, <span class="type">args);</span></span></span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">"------------------分割线------------------"</span>);</span><br><span class="line">        System.<span class="keyword">out</span>.println(run.getBeansOfType(MakeApp<span class="class">.<span class="keyword">class</span>));</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>测试结果</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">------------------分割线------------------</span><br><span class="line">&#123;createWechat=com.yxj.spring.<span class="symbol">Wechat@</span><span class="number">5</span>cad8b7d, createPipiXia=com.yxj.spring.<span class="symbol">PipiXia@</span><span class="number">7</span>b02e036&#125;</span><br><span class="line">------------------分割线------------------</span><br><span class="line">&#123;createWechat=com.yxj.spring.<span class="symbol">Wechat@</span><span class="number">5</span>cad8b7d, createPipiXia=com.yxj.spring.<span class="symbol">PipiXia@</span><span class="number">7</span>b02e036&#125;</span><br></pre></td></tr></table></figure><p>可以看到结果把通过 @Bean 加载的两个 MakeApp 实现类对象全部打印出来了</p><p>了解 Condition 接口，实现自定义 bean 的加载</p><p>源代码</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * Copyright 2002-2017 the original author or authors.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * Licensed under the Apache License, Version 2.0 (the "License");</span></span><br><span class="line"><span class="comment"> * you may not use this file except in compliance with the License.</span></span><br><span class="line"><span class="comment"> * You may obtain a copy of the License at</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *      http://www.apache.org/licenses/LICENSE-2.0</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * Unless required by applicable law or agreed to in writing, software</span></span><br><span class="line"><span class="comment"> * distributed under the License is distributed on an "AS IS" BASIS,</span></span><br><span class="line"><span class="comment"> * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></span><br><span class="line"><span class="comment"> * See the License for the specific language governing permissions and</span></span><br><span class="line"><span class="comment"> * limitations under the License.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">package</span> org.springframework.context.annotation;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.config.BeanFactoryPostProcessor;</span><br><span class="line"><span class="keyword">import</span> org.springframework.core.type.AnnotatedTypeMetadata;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * A single &#123;<span class="doctag">@code</span> condition&#125; that must be &#123;<span class="doctag">@linkplain</span> #matches matched&#125; in order</span></span><br><span class="line"><span class="comment"> * for a component to be registered.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;Conditions are checked immediately before the bean-definition is due to be</span></span><br><span class="line"><span class="comment"> * registered and are free to veto registration based on any criteria that can</span></span><br><span class="line"><span class="comment"> * be determined at that point.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;Conditions must follow the same restrictions as &#123;<span class="doctag">@link</span> BeanFactoryPostProcessor&#125;</span></span><br><span class="line"><span class="comment"> * and take care to never interact with bean instances. For more fine-grained control</span></span><br><span class="line"><span class="comment"> * of conditions that interact with &#123;<span class="doctag">@code</span> <span class="doctag">@Configuration</span>&#125; beans consider the</span></span><br><span class="line"><span class="comment"> * &#123;<span class="doctag">@link</span> ConfigurationCondition&#125; interface.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Phillip Webb</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 4.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@see</span> ConfigurationCondition</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@see</span> Conditional</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@see</span> ConditionContext</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@FunctionalInterface</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Condition</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Determine if the condition matches.</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> context the condition context</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> metadata metadata of the &#123;<span class="doctag">@link</span> org.springframework.core.type.AnnotationMetadata class&#125;</span></span><br><span class="line"><span class="comment">     * or &#123;<span class="doctag">@link</span> org.springframework.core.type.MethodMetadata method&#125; being checked</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> &#123;<span class="doctag">@code</span> true&#125; if the condition matches and the component can be registered,</span></span><br><span class="line"><span class="comment">     * or &#123;<span class="doctag">@code</span> false&#125; to veto the annotated component's registration</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">matches</span><span class="params">(ConditionContext context, AnnotatedTypeMetadata metadata)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * Copyright 2002-2017 the original author or authors.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * Licensed under the Apache License, Version 2.0 (the "License");</span></span><br><span class="line"><span class="comment"> * you may not use this file except in compliance with the License.</span></span><br><span class="line"><span class="comment"> * You may obtain a copy of the License at</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *      http://www.apache.org/licenses/LICENSE-2.0</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * Unless required by applicable law or agreed to in writing, software</span></span><br><span class="line"><span class="comment"> * distributed under the License is distributed on an "AS IS" BASIS,</span></span><br><span class="line"><span class="comment"> * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></span><br><span class="line"><span class="comment"> * See the License for the specific language governing permissions and</span></span><br><span class="line"><span class="comment"> * limitations under the License.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">package</span> org.springframework.context.annotation;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.config.BeanFactoryPostProcessor;</span><br><span class="line"><span class="keyword">import</span> org.springframework.core.type.AnnotatedTypeMetadata;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * A single &#123;<span class="doctag">@code</span> condition&#125; that must be &#123;<span class="doctag">@linkplain</span> #matches matched&#125; in order</span></span><br><span class="line"><span class="comment"> * for a component to be registered.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;Conditions are checked immediately before the bean-definition is due to be</span></span><br><span class="line"><span class="comment"> * registered and are free to veto registration based on any criteria that can</span></span><br><span class="line"><span class="comment"> * be determined at that point.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;Conditions must follow the same restrictions as &#123;<span class="doctag">@link</span> BeanFactoryPostProcessor&#125;</span></span><br><span class="line"><span class="comment"> * and take care to never interact with bean instances. For more fine-grained control</span></span><br><span class="line"><span class="comment"> * of conditions that interact with &#123;<span class="doctag">@code</span> <span class="doctag">@Configuration</span>&#125; beans consider the</span></span><br><span class="line"><span class="comment"> * &#123;<span class="doctag">@link</span> ConfigurationCondition&#125; interface.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Phillip Webb</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 4.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@see</span> ConfigurationCondition</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@see</span> Conditional</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@see</span> ConditionContext</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@FunctionalInterface</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Condition</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Determine if the condition matches.</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> context the condition context</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> metadata metadata of the &#123;<span class="doctag">@link</span> org.springframework.core.type.AnnotationMetadata class&#125;</span></span><br><span class="line"><span class="comment">     * or &#123;<span class="doctag">@link</span> org.springframework.core.type.MethodMetadata method&#125; being checked</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> &#123;<span class="doctag">@code</span> true&#125; if the condition matches and the component can be registered,</span></span><br><span class="line"><span class="comment">     * or &#123;<span class="doctag">@code</span> false&#125; to veto the annotated component's registration</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">matches</span><span class="params">(ConditionContext context, AnnotatedTypeMetadata metadata)</span></span>;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>上诉代码描述了 matches 返回值如果是 ture 就会再加 bean，反之则反</p><p>实现自定义 Condition</p><p>新建 Wechat 自定义 Condition, 默认返回 false（不装配 bean）</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yxj.spring;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Condition;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.ConditionContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.core.type.AnnotatedTypeMetadata;</span><br><span class="line"><span class="keyword">import</span> org.springframework.util.StringUtils;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ProjectName</span>: springBootDemo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Package</span>: com.yxj.spring</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: 阿杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@CreateDate</span>: 2019/1/22 22:35</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateUser</span>: 暂无</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateDate</span>: 2019/1/22 22:35</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateRemark</span>: The modified content</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span>: 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WechatCondition</span> <span class="keyword">implements</span> <span class="title">Condition</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">matches</span><span class="params">(ConditionContext context, AnnotatedTypeMetadata metadata)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">package</span> com.yxj.spring;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Condition;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.ConditionContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.core.type.AnnotatedTypeMetadata;</span><br><span class="line"><span class="keyword">import</span> org.springframework.util.StringUtils;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ProjectName</span>: springBootDemo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Package</span>: com.yxj.spring</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: 阿杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@CreateDate</span>: 2019/1/22 22:35</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateUser</span>: 暂无</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateDate</span>: 2019/1/22 22:35</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateRemark</span>: The modified content</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span>: 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WechatCondition</span> <span class="keyword">implements</span> <span class="title">Condition</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">matches</span><span class="params">(ConditionContext context, AnnotatedTypeMetadata metadata)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>新建 PipiXia 自定义 Condition, 默认返回 true（装配 bean）</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yxj.spring;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Condition;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.ConditionContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.core.type.AnnotatedTypeMetadata;</span><br><span class="line"><span class="keyword">import</span> org.springframework.util.StringUtils;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ProjectName</span>: springBootDemo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Package</span>: com.yxj.spring</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: 阿杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@CreateDate</span>: 2019/1/22 22:35</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateUser</span>: 暂无</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateDate</span>: 2019/1/22 22:35</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateRemark</span>: The modified content</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span>: 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PipiXiaCondition</span> <span class="keyword">implements</span> <span class="title">Condition</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *当name不为空的时候，判断如果name中包含appName的时候返回true</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> context</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> metadata</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">matches</span><span class="params">(ConditionContext context, AnnotatedTypeMetadata metadata)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">package</span> com.yxj.spring;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Condition;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.ConditionContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.core.type.AnnotatedTypeMetadata;</span><br><span class="line"><span class="keyword">import</span> org.springframework.util.StringUtils;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ProjectName</span>: springBootDemo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Package</span>: com.yxj.spring</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: 阿杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@CreateDate</span>: 2019/1/22 22:35</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateUser</span>: 暂无</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateDate</span>: 2019/1/22 22:35</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateRemark</span>: The modified content</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span>: 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PipiXiaCondition</span> <span class="keyword">implements</span> <span class="title">Condition</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *当name不为空的时候，判断如果name中包含appName的时候返回true</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> context</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> metadata</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">matches</span><span class="params">(ConditionContext context, AnnotatedTypeMetadata metadata)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在 @Bean 所在的类中添加自定义条件，配合 @Conditional 注解来实现</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yxj.spring;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringBootConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.<span class="keyword">annotation</span>.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.<span class="keyword">annotation</span>.Conditional;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ProjectName</span>: springBootDemo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Package</span>: com.yxj.spring</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:  <span class="doctag">@SpringBootConfiguration</span>继承自<span class="doctag">@Configuration</span>，</span></span><br><span class="line"><span class="comment"> * 二者功能也一致，标注当前类是配置类，</span></span><br><span class="line"><span class="comment"> * 并会将当前类内声明的一个或多个以<span class="doctag">@Bean</span>注解标记的方法的实例纳入到spring容器中，</span></span><br><span class="line"><span class="comment"> * 并且实例名就是方法名。</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: 阿杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@CreateDate</span>: 2019/1/22 22:14</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateUser</span>: 暂无</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateDate</span>: 2019/1/22 22:14</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateRemark</span>: The modified content</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span>: 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@SpringBootConfiguration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoadMyBean</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@Conditional(WechatCondition.class)</span></span><br><span class="line">    <span class="keyword">public</span> MakeApp createWechat()&#123;</span><br><span class="line">        <span class="keyword">return</span> new Wechat();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@Conditional(PipiXiaCondition.class)</span></span><br><span class="line">    <span class="keyword">public</span> MakeApp createPipiXia()&#123;</span><br><span class="line">        <span class="keyword">return</span> new PipiXia();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">package</span> com.yxj.spring;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringBootConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.<span class="keyword">annotation</span>.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.<span class="keyword">annotation</span>.Conditional;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ProjectName</span>: springBootDemo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Package</span>: com.yxj.spring</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:  <span class="doctag">@SpringBootConfiguration</span>继承自<span class="doctag">@Configuration</span>，</span></span><br><span class="line"><span class="comment"> * 二者功能也一致，标注当前类是配置类，</span></span><br><span class="line"><span class="comment"> * 并会将当前类内声明的一个或多个以<span class="doctag">@Bean</span>注解标记的方法的实例纳入到spring容器中，</span></span><br><span class="line"><span class="comment"> * 并且实例名就是方法名。</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: 阿杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@CreateDate</span>: 2019/1/22 22:14</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateUser</span>: 暂无</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateDate</span>: 2019/1/22 22:14</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateRemark</span>: The modified content</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span>: 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@SpringBootConfiguration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoadMyBean</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@Conditional(WechatCondition.class)</span></span><br><span class="line">    <span class="keyword">public</span> MakeApp createWechat()&#123;</span><br><span class="line">        <span class="keyword">return</span> new Wechat();</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@Conditional(PipiXiaCondition.class)</span></span><br><span class="line">    <span class="keyword">public</span> MakeApp createPipiXia()&#123;</span><br><span class="line">        <span class="keyword">return</span> new PipiXia();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>再次测试，测试结果</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">------------------分割线------------------</span><br><span class="line">&#123;createPipiXia=com.yxj.spring.<span class="symbol">PipiXia@</span><span class="number">420</span>bc288&#125;</span><br><span class="line">------------------分割线------------------</span><br><span class="line">&#123;createPipiXia=com.yxj.spring.<span class="symbol">PipiXia@</span><span class="number">420</span>bc288&#125;</span><br></pre></td></tr></table></figure><p>可以看到只打印了一个 pipixia 实例 bean，微信没有装配进来</p><p>SpringBoot 中自带的 Condition 实现</p><p><img src="http://q2jt1v8qv.bkt.clouddn.com/1.jpg" alt><br>可以看到这个是继承了 @Conditional 注解，传了自定义的 class 对象，变成了一个新的注解<br>常用 @Conditional 注解使用，可以查看大佬博客 <a href="https://blog.csdn.net/u012437781/article/details/78626617" target="_blank" rel="external nofollow noopener noreferrer">https://blog.csdn.net/u012437781/article/details/78626617</a></p><h3 id="Import-注解"><a href="#Import-注解" class="headerlink" title="@Import 注解"></a>@Import 注解</h3><p>用处</p><ul><li>@Import 其实就是引入一个或多个配置，可以导入普通类，也可以导入配置类（上述的 LoadMyBean 为配置类，主要通过 @Bean 生成 bean 给 spring 管理）</li><li>@Import 用来导入一个或多个类（会被 spring 容器管理），或者配置类（配置类里的 @Bean 标记的类也会被 spring 容器管理）</li></ul><p>测试</p><p>还是以上的例子，去掉配置类 (LoadMyBean) 中的 @SpringBootConfiguration 注解</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yxj.spring;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringBootConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.<span class="keyword">annotation</span>.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.<span class="keyword">annotation</span>.Conditional;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ProjectName</span>: springBootDemo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Package</span>: com.yxj.spring</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:  <span class="doctag">@SpringBootConfiguration</span>继承自<span class="doctag">@Configuration</span>，</span></span><br><span class="line"><span class="comment"> * 二者功能也一致，标注当前类是配置类，</span></span><br><span class="line"><span class="comment"> * 并会将当前类内声明的一个或多个以<span class="doctag">@Bean</span>注解标记的方法的实例纳入到spring容器中，</span></span><br><span class="line"><span class="comment"> * 并且实例名就是方法名。</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: 阿杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@CreateDate</span>: 2019/1/22 22:14</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateUser</span>: 暂无</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateDate</span>: 2019/1/22 22:14</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateRemark</span>: The modified content</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span>: 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoadMyBean</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@Conditional(WechatCondition.class)</span></span><br><span class="line">    <span class="keyword">public</span> MakeApp createWechat()&#123;</span><br><span class="line">        <span class="keyword">return</span> new Wechat();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@Conditional(PipiXiaCondition.class)</span></span><br><span class="line">    <span class="keyword">public</span> MakeApp createPipiXia()&#123;</span><br><span class="line">        <span class="keyword">return</span> new PipiXia();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">package</span> com.yxj.spring;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringBootConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.<span class="keyword">annotation</span>.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.<span class="keyword">annotation</span>.Conditional;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ProjectName</span>: springBootDemo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Package</span>: com.yxj.spring</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:  <span class="doctag">@SpringBootConfiguration</span>继承自<span class="doctag">@Configuration</span>，</span></span><br><span class="line"><span class="comment"> * 二者功能也一致，标注当前类是配置类，</span></span><br><span class="line"><span class="comment"> * 并会将当前类内声明的一个或多个以<span class="doctag">@Bean</span>注解标记的方法的实例纳入到spring容器中，</span></span><br><span class="line"><span class="comment"> * 并且实例名就是方法名。</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: 阿杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@CreateDate</span>: 2019/1/22 22:14</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateUser</span>: 暂无</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateDate</span>: 2019/1/22 22:14</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateRemark</span>: The modified content</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span>: 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoadMyBean</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@Conditional(WechatCondition.class)</span></span><br><span class="line">    <span class="keyword">public</span> MakeApp createWechat()&#123;</span><br><span class="line">        <span class="keyword">return</span> new Wechat();</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@Conditional(PipiXiaCondition.class)</span></span><br><span class="line">    <span class="keyword">public</span> MakeApp createPipiXia()&#123;</span><br><span class="line">        <span class="keyword">return</span> new PipiXia();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>修改 springboot 启动类，添加 @Import 注解</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yxj.spring;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.<span class="keyword">annotation</span>.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.condition.ConditionalOnBean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.context.properties.ConfigurationProperties;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ConfigurableApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.<span class="keyword">annotation</span>.*;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ProjectName</span>: springBootDemo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Package</span>: com.yxj.spring</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: 杨小杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@CreateDate</span>: 2019/1/18 20:18</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateUser</span>: 暂无</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateDate</span>: 2019/1/18 20:18</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateRemark</span>: The modified content</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span>: 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@Import(LoadMyBean.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringBootTestRun</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * getBeansOfType(MakeApp.class)会装配bean类型是MakeApp的所有实例</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> args</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> static void main(String[] args) &#123;</span><br><span class="line">        ConfigurableApplicationContext run = SpringApplication.run(SpringBootTestRun<span class="class">.<span class="keyword">class</span>, <span class="type">args);</span></span></span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">"------------------分割线------------------"</span>);</span><br><span class="line">        System.<span class="keyword">out</span>.println(run.getBeansOfType(MakeApp<span class="class">.<span class="keyword">class</span>));</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">package</span> com.yxj.spring;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.<span class="keyword">annotation</span>.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.condition.ConditionalOnBean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.context.properties.ConfigurationProperties;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ConfigurableApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.<span class="keyword">annotation</span>.*;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ProjectName</span>: springBootDemo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Package</span>: com.yxj.spring</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: 杨小杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@CreateDate</span>: 2019/1/18 20:18</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateUser</span>: 暂无</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateDate</span>: 2019/1/18 20:18</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateRemark</span>: The modified content</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span>: 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@Import(LoadMyBean.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringBootTestRun</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * getBeansOfType(MakeApp.class)会装配bean类型是MakeApp的所有实例</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> args</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> static void main(String[] args) &#123;</span><br><span class="line">        ConfigurableApplicationContext run = SpringApplication.run(SpringBootTestRun<span class="class">.<span class="keyword">class</span>, <span class="type">args);</span></span></span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">"------------------分割线------------------"</span>);</span><br><span class="line">        System.<span class="keyword">out</span>.println(run.getBeansOfType(MakeApp<span class="class">.<span class="keyword">class</span>));</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>测试结果</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">------------------分割线------------------</span><br><span class="line">&#123;createPipiXia=com.yxj.spring.<span class="symbol">PipiXia@</span><span class="number">6548</span>bb7d&#125;</span><br><span class="line">------------------分割线------------------</span><br><span class="line">&#123;createPipiXia=com.yxj.spring.<span class="symbol">PipiXia@</span><span class="number">6548</span>bb7d&#125;</span><br></pre></td></tr></table></figure><p>测试结果表明了，虽然配置类没有加入 @SpringBootConfiguration,@Component，@Service,@Controller 等交给 spring 管理的注解，但是通过启动类添加 @Import 引入方式，仍然可以在 spring 进行依赖注入，交由 spring 管理</p><h2 id="声明"><a href="#声明" class="headerlink" title="声明"></a>声明</h2><ul><li><p>本人是与 springBoot 教学视频同步学习，此文章是看视频总结出来的重点内容.</p></li><li><p>如果觉得文章描绘的不够清楚，欢迎留言，也可以点击关于我，关注公众号，在公众号内发送关键字 “springboot” 或者 “springBoot” 领取 springBoot 教程。</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> springBoot </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JAVA </tag>
            
            <tag> 微服务 </tag>
            
            <tag> SpringBoot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>springboot 建立项目与读取配置文件</title>
      <link href="/2019/springboot10121121/"/>
      <url>/2019/springboot10121121/</url>
      
        <content type="html"><![CDATA[<h2 id="建立maven-项目"><a href="#建立maven-项目" class="headerlink" title="建立maven 项目"></a>建立maven 项目</h2><p><img src="http://q2jt1v8qv.bkt.clouddn.com/FtFrvuJqSZdUsgp4WXO_L33lLgjC" alt></p><p><img src="http://q2jt1v8qv.bkt.clouddn.com/FoQAAKtK5UpHyxrdeP2N8iLFpOSv" alt></p><a id="more"></a><h2 id="进入-spring-官网"><a href="#进入-spring-官网" class="headerlink" title="进入 spring 官网"></a>进入 spring 官网</h2><ul><li><a href="http://spring.io/" target="_blank" rel="external nofollow noopener noreferrer">http://spring.io/</a>   访问网站，点击 project 找到 springboot 子项目</li></ul><p><img src="http://q2jt1v8qv.bkt.clouddn.com/Fu6dtzT8JM_KLGvgguOTjoiCJ0n7" alt></p><ul><li>点击 learn，选择一个版本，查看文档（以前的版本没有找到文档，就直接用最新的了）</li></ul><blockquote><p>知识拓展: 看下面图片能够发现有一些标志 SHAPSHOT，GA 等等</p></blockquote><p><img src="http://q2jt1v8qv.bkt.clouddn.com/FnxtpMyqAs07DnWvsSBLjxueeDpw" alt></p><p>流程：SNAPSHOT-&gt;alpha-&gt;beta-&gt;release-&gt;GA</p><p>Alpha：是内部测试版, 一般不向外部发布, 会有很多 Bug. 一般只有测试人员使用。</p><p>Beta：也是测试版，这个阶段的版本会一直加入新的功能。在 Alpha 版之后推出。</p><p>RC：(Release　Candidate) 顾名思义么 ! 用在软件上就是候选版本。系统平台上就是发行候选版本。RC 版不会再加入新的功能了，主要着重于除错。</p><p>GA:General Availability, 正式发布的版本，在国外都是用 GA 来说明 release 版本的。</p><p>详情查看：<a href="https://www.cnblogs.com/lexiaofei/p/7065720.html" target="_blank" rel="external nofollow noopener noreferrer">https://www.cnblogs.com/lexiaofei/p/7065720.html</a></p><ul><li>点击 Getting Started（入门）进入 springboot 官方教学</li></ul><ol><li><p>查看目录 System Requirements（系统要求）查看硬性要求，最低需要 java8，可以通过 java-version 命令查看自己的 java 版本信息</p></li><li><p>查看 Maven Installation（maven 安装），复制依赖的 jar 包</p></li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.yxj.spring<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springBootDemo<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Inherit defaults from Spring Boot --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Add typical dependencies for a web application --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Package as an executable jar --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"> </span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.yxj.spring<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springBootDemo<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"> </span><br><span class="line">    <span class="comment">&lt;!-- Inherit defaults from Spring Boot --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"> </span><br><span class="line">    <span class="comment">&lt;!-- Add typical dependencies for a web application --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"> </span><br><span class="line">    <span class="comment">&lt;!-- Package as an executable jar --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="项目运行"><a href="#项目运行" class="headerlink" title="项目运行"></a>项目运行</h2><p>创建一个注入的实体 bean</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yxj.spring;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ProjectName</span>: springBootDemo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Package</span>: com.yxj.spring</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: 杨小杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@CreateDate</span>: 2019/1/18 20:22</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateUser</span>: 暂无</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateDate</span>: 2019/1/18 20:22</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateRemark</span>: The modified content</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span>: 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String userName;</span><br><span class="line">    <span class="keyword">private</span> String passWord;</span><br><span class="line">    <span class="keyword">public</span> String getUserName() &#123;</span><br><span class="line">        <span class="keyword">return</span> userName;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> User setUserName(String userName) &#123;</span><br><span class="line">        <span class="keyword">this</span>.userName = userName;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> String getPassWord() &#123;</span><br><span class="line">        <span class="keyword">return</span> passWord;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> User setPassWord(String passWord) &#123;</span><br><span class="line">        <span class="keyword">this</span>.passWord = passWord;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">package</span> com.yxj.spring;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ProjectName</span>: springBootDemo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Package</span>: com.yxj.spring</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: 杨小杰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@CreateDate</span>: 2019/1/18 20:22</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateUser</span>: 暂无</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateDate</span>: 2019/1/18 20:22</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@UpdateRemark</span>: The modified content</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span>: 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String userName;</span><br><span class="line">    <span class="keyword">private</span> String passWord;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> String getUserName() &#123;</span><br><span class="line">        <span class="keyword">return</span> userName;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> User setUserName(String userName) &#123;</span><br><span class="line">        <span class="keyword">this</span>.userName = userName;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> String getPassWord() &#123;</span><br><span class="line">        <span class="keyword">return</span> passWord;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> User setPassWord(String passWord) &#123;</span><br><span class="line">        <span class="keyword">this</span>.passWord = passWord;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>新建一个 main 方法，通过 @SpringBootApplication 和 @Bean 注解创建 bean 依赖注入并输出</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yxj.spring;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ConfigurableApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* <span class="doctag">@ProjectName</span>: springBootDemo</span></span><br><span class="line"><span class="comment">* <span class="doctag">@Package</span>: com.yxj.spring</span></span><br><span class="line"><span class="comment">* <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment">* <span class="doctag">@Author</span>: 阿杰</span></span><br><span class="line"><span class="comment">* <span class="doctag">@CreateDate</span>: 2019/1/18 20:18</span></span><br><span class="line"><span class="comment">* <span class="doctag">@UpdateUser</span>: 暂无</span></span><br><span class="line"><span class="comment">* <span class="doctag">@UpdateDate</span>: 2019/1/18 20:18</span></span><br><span class="line"><span class="comment">* <span class="doctag">@UpdateRemark</span>: The modified content</span></span><br><span class="line"><span class="comment">* <span class="doctag">@Version</span>: 1.0</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringBootTestRun</span> </span>&#123;</span><br><span class="line">   <span class="meta">@Bean</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> User <span class="title">getUserBean</span><span class="params">()</span></span>&#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="keyword">new</span> User();</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">       ConfigurableApplicationContext run = SpringApplication.run(SpringBootTestRun<span class="class">.<span class="keyword">class</span>, <span class="title">args</span>)</span>;</span><br><span class="line">       System.out.println(<span class="string">"-------------分割线---------------"</span>);</span><br><span class="line">       User getUserBean = run.getBean(User<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">       System.out.println(getUserBean);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">package</span> com.yxj.spring;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ConfigurableApplicationContext;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* <span class="doctag">@ProjectName</span>: springBootDemo</span></span><br><span class="line"><span class="comment">* <span class="doctag">@Package</span>: com.yxj.spring</span></span><br><span class="line"><span class="comment">* <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment">* <span class="doctag">@Author</span>: 阿杰</span></span><br><span class="line"><span class="comment">* <span class="doctag">@CreateDate</span>: 2019/1/18 20:18</span></span><br><span class="line"><span class="comment">* <span class="doctag">@UpdateUser</span>: 暂无</span></span><br><span class="line"><span class="comment">* <span class="doctag">@UpdateDate</span>: 2019/1/18 20:18</span></span><br><span class="line"><span class="comment">* <span class="doctag">@UpdateRemark</span>: The modified content</span></span><br><span class="line"><span class="comment">* <span class="doctag">@Version</span>: 1.0</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"> </span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringBootTestRun</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">   <span class="meta">@Bean</span></span><br><span class="line"> </span><br><span class="line">   <span class="function"><span class="keyword">public</span> User <span class="title">getUserBean</span><span class="params">()</span></span>&#123;</span><br><span class="line"> </span><br><span class="line">       <span class="keyword">return</span> <span class="keyword">new</span> User();</span><br><span class="line"> </span><br><span class="line">   &#125;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">       ConfigurableApplicationContext run = SpringApplication.run(SpringBootTestRun<span class="class">.<span class="keyword">class</span>, <span class="title">args</span>)</span>;</span><br><span class="line"> </span><br><span class="line">       System.out.println(<span class="string">"-------------分割线---------------"</span>);</span><br><span class="line"> </span><br><span class="line">       User getUserBean = run.getBean(User<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"> </span><br><span class="line">       System.out.println(getUserBean);</span><br><span class="line"> </span><br><span class="line">   &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>运行 main 方法，得到输出结果</p><p>关于本类中使用的注解标签含义，详情查看：<a href="https://www.jianshu.com/p/4e1cab2d8431" target="_blank" rel="external nofollow noopener noreferrer">https://www.jianshu.com/p/4e1cab2d8431</a></p><h2 id="读取配置文件"><a href="#读取配置文件" class="headerlink" title="读取配置文件"></a>读取配置文件</h2><p>springboot 会默认去读取</p><ul><li><p>classPath:application.properties</p></li><li><p>classPath:/config/application.properties</p></li><li><p>file:application.properties</p></li><li><p>file:/config/application.properties</p></li></ul><p>下面的内容，后面会写读取 yml 这方面的文章。</p><p>在 maven 项目的 resource 目录下面新建一个 application.properties 文件</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">localhost.test.userName</span>=test123</span><br><span class="line"><span class="attr">localhost.test.passWord</span>=passWordTest</span><br><span class="line"><span class="attr">test.remark</span>=test userName is <span class="variable">$&#123;localhost.test.userName&#125;</span></span><br><span class="line"><span class="attr">localhost.test.userName</span>=test123</span><br><span class="line"> </span><br><span class="line"><span class="attr">localhost.test.passWord</span>=passWordTest</span><br><span class="line"> </span><br><span class="line"><span class="attr">test.remark</span>=test userName is <span class="variable">$&#123;localhost.test.userName&#125;</span></span><br></pre></td></tr></table></figure><p>配置文件加入测试配置 key 与 value 值</p><ul><li><p>通过 @Value(“${配置文件的 key}”) 方式读取配置文件的值</p></li><li><p>如果配置文件中没有这个 key，通过 @Value(“${给定的 key: 默认值}”)可以给定默认值，如果不加 “: 默认值” 会报错。</p></li><li><p>如果配置文件有 key，但是 value 为空，给定默认值这种方式，不会得到默认值的结果，会输出空值</p></li></ul><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yxj.spring;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.<span class="keyword">annotation</span>.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ConfigurableApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.<span class="keyword">annotation</span>.Bean;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* <span class="doctag">@ProjectName</span>: springBootDemo</span></span><br><span class="line"><span class="comment">* <span class="doctag">@Package</span>: com.yxj.spring</span></span><br><span class="line"><span class="comment">* <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment">* <span class="doctag">@Author</span>: 阿杰</span></span><br><span class="line"><span class="comment">* <span class="doctag">@CreateDate</span>: 2019/1/18 20:18</span></span><br><span class="line"><span class="comment">* <span class="doctag">@UpdateUser</span>: 暂无</span></span><br><span class="line"><span class="comment">* <span class="doctag">@UpdateDate</span>: 2019/1/18 20:18</span></span><br><span class="line"><span class="comment">* <span class="doctag">@UpdateRemark</span>: The modified content</span></span><br><span class="line"><span class="comment">* <span class="doctag">@Version</span>: 1.0</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringBootTestRun</span> </span>&#123;</span><br><span class="line">   <span class="meta">@Value(<span class="meta-string">"<span class="subst">$&#123;localhost.test.userName&#125;</span>"</span>)</span></span><br><span class="line">   <span class="keyword">private</span> String testUserName;</span><br><span class="line">   <span class="meta">@Value(<span class="meta-string">"<span class="subst">$&#123;localhost.test.passWord&#125;</span>"</span>)</span></span><br><span class="line">   <span class="keyword">private</span> String testPassWord;</span><br><span class="line">   <span class="meta">@Value(<span class="meta-string">"<span class="subst">$&#123;localhost.test.default:testDefault&#125;</span>"</span>)</span></span><br><span class="line">   <span class="keyword">private</span> String testDefault;</span><br><span class="line">   <span class="meta">@Value(<span class="meta-string">"<span class="subst">$&#123;test.remark&#125;</span>"</span>)</span></span><br><span class="line">   <span class="keyword">private</span> String testRemark;</span><br><span class="line">   <span class="keyword">public</span> static void main(String[] args) &#123;</span><br><span class="line">       ConfigurableApplicationContext run = SpringApplication.run(SpringBootTestRun<span class="class">.<span class="keyword">class</span>, <span class="type">args);</span></span></span><br><span class="line">       System.<span class="keyword">out</span>.println(<span class="string">"-------------分割线---------------"</span>);</span><br><span class="line">       SpringBootTestRun bean = run.getBean(SpringBootTestRun<span class="class">.<span class="keyword">class</span>);</span></span><br><span class="line">       System.<span class="keyword">out</span>.println(bean.testUserName);</span><br><span class="line">       System.<span class="keyword">out</span>.println(bean.testPassWord);</span><br><span class="line">       System.<span class="keyword">out</span>.println(bean.testRemark);</span><br><span class="line">       System.<span class="keyword">out</span>.println(bean.testDefault);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">package</span> com.yxj.spring;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.<span class="keyword">annotation</span>.Value;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ConfigurableApplicationContext;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> org.springframework.context.<span class="keyword">annotation</span>.Bean;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* <span class="doctag">@ProjectName</span>: springBootDemo</span></span><br><span class="line"><span class="comment">* <span class="doctag">@Package</span>: com.yxj.spring</span></span><br><span class="line"><span class="comment">* <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment">* <span class="doctag">@Author</span>: 阿杰</span></span><br><span class="line"><span class="comment">* <span class="doctag">@CreateDate</span>: 2019/1/18 20:18</span></span><br><span class="line"><span class="comment">* <span class="doctag">@UpdateUser</span>: 暂无</span></span><br><span class="line"><span class="comment">* <span class="doctag">@UpdateDate</span>: 2019/1/18 20:18</span></span><br><span class="line"><span class="comment">* <span class="doctag">@UpdateRemark</span>: The modified content</span></span><br><span class="line"><span class="comment">* <span class="doctag">@Version</span>: 1.0</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"> </span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringBootTestRun</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">   <span class="meta">@Value(<span class="meta-string">"<span class="subst">$&#123;localhost.test.userName&#125;</span>"</span>)</span></span><br><span class="line"> </span><br><span class="line">   <span class="keyword">private</span> String testUserName;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">   <span class="meta">@Value(<span class="meta-string">"<span class="subst">$&#123;localhost.test.passWord&#125;</span>"</span>)</span></span><br><span class="line"> </span><br><span class="line">   <span class="keyword">private</span> String testPassWord;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">   <span class="meta">@Value(<span class="meta-string">"<span class="subst">$&#123;localhost.test.default:testDefault&#125;</span>"</span>)</span></span><br><span class="line"> </span><br><span class="line">   <span class="keyword">private</span> String testDefault;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">   <span class="meta">@Value(<span class="meta-string">"<span class="subst">$&#123;test.remark&#125;</span>"</span>)</span></span><br><span class="line"> </span><br><span class="line">   <span class="keyword">private</span> String testRemark;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">   <span class="keyword">public</span> static void main(String[] args) &#123;</span><br><span class="line"> </span><br><span class="line">       ConfigurableApplicationContext run = SpringApplication.run(SpringBootTestRun<span class="class">.<span class="keyword">class</span>, <span class="type">args);</span></span></span><br><span class="line"> </span><br><span class="line">       System.<span class="keyword">out</span>.println(<span class="string">"-------------分割线---------------"</span>);</span><br><span class="line"> </span><br><span class="line">       SpringBootTestRun bean = run.getBean(SpringBootTestRun<span class="class">.<span class="keyword">class</span>);</span></span><br><span class="line"> </span><br><span class="line">       System.<span class="keyword">out</span>.println(bean.testUserName);</span><br><span class="line"> </span><br><span class="line">       System.<span class="keyword">out</span>.println(bean.testPassWord);</span><br><span class="line"> </span><br><span class="line">       System.<span class="keyword">out</span>.println(bean.testRemark);</span><br><span class="line"> </span><br><span class="line">       System.<span class="keyword">out</span>.println(bean.testDefault);</span><br><span class="line"> </span><br><span class="line">   &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>通过 Environment 对象获取</li></ul><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yxj.spring;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.<span class="keyword">annotation</span>.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ConfigurableApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.<span class="keyword">annotation</span>.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.core.env.ConfigurableEnvironment;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* <span class="doctag">@ProjectName</span>: springBootDemo</span></span><br><span class="line"><span class="comment">* <span class="doctag">@Package</span>: com.yxj.spring</span></span><br><span class="line"><span class="comment">* <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment">* <span class="doctag">@Author</span>: 阿杰</span></span><br><span class="line"><span class="comment">* <span class="doctag">@CreateDate</span>: 2019/1/18 20:18</span></span><br><span class="line"><span class="comment">* <span class="doctag">@UpdateUser</span>: 暂无</span></span><br><span class="line"><span class="comment">* <span class="doctag">@UpdateDate</span>: 2019/1/18 20:18</span></span><br><span class="line"><span class="comment">* <span class="doctag">@UpdateRemark</span>: The modified content</span></span><br><span class="line"><span class="comment">* <span class="doctag">@Version</span>: 1.0</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringBootTestRun</span> </span>&#123;</span><br><span class="line">   <span class="keyword">public</span> static void main(String[] args) &#123;</span><br><span class="line">       ConfigurableApplicationContext run = SpringApplication.run(SpringBootTestRun<span class="class">.<span class="keyword">class</span>, <span class="type">args);</span></span></span><br><span class="line">       System.<span class="keyword">out</span>.println(<span class="string">"-------------分割线---------------"</span>);</span><br><span class="line">       ConfigurableEnvironment environment = run.getEnvironment();</span><br><span class="line">       String userName = environment.getProperty(<span class="string">"localhost.test.userName"</span>);</span><br><span class="line">       String passWord = environment.getProperty(<span class="string">"localhost.test.passWord"</span>);</span><br><span class="line">       String testRemark = environment.getProperty(<span class="string">"test.remark"</span>);</span><br><span class="line">       System.<span class="keyword">out</span>.println(userName);</span><br><span class="line">       System.<span class="keyword">out</span>.println(passWord);</span><br><span class="line">       System.<span class="keyword">out</span>.println(testRemark);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">package</span> com.yxj.spring;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.<span class="keyword">annotation</span>.Value;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ConfigurableApplicationContext;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> org.springframework.context.<span class="keyword">annotation</span>.Bean;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> org.springframework.core.env.ConfigurableEnvironment;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* <span class="doctag">@ProjectName</span>: springBootDemo</span></span><br><span class="line"><span class="comment">* <span class="doctag">@Package</span>: com.yxj.spring</span></span><br><span class="line"><span class="comment">* <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment">* <span class="doctag">@Author</span>: 阿杰</span></span><br><span class="line"><span class="comment">* <span class="doctag">@CreateDate</span>: 2019/1/18 20:18</span></span><br><span class="line"><span class="comment">* <span class="doctag">@UpdateUser</span>: 暂无</span></span><br><span class="line"><span class="comment">* <span class="doctag">@UpdateDate</span>: 2019/1/18 20:18</span></span><br><span class="line"><span class="comment">* <span class="doctag">@UpdateRemark</span>: The modified content</span></span><br><span class="line"><span class="comment">* <span class="doctag">@Version</span>: 1.0</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"> </span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringBootTestRun</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">   <span class="keyword">public</span> static void main(String[] args) &#123;</span><br><span class="line"> </span><br><span class="line">       ConfigurableApplicationContext run = SpringApplication.run(SpringBootTestRun<span class="class">.<span class="keyword">class</span>, <span class="type">args);</span></span></span><br><span class="line"> </span><br><span class="line">       System.<span class="keyword">out</span>.println(<span class="string">"-------------分割线---------------"</span>);</span><br><span class="line"> </span><br><span class="line">       ConfigurableEnvironment environment = run.getEnvironment();</span><br><span class="line"> </span><br><span class="line">       String userName = environment.getProperty(<span class="string">"localhost.test.userName"</span>);</span><br><span class="line"> </span><br><span class="line">       String passWord = environment.getProperty(<span class="string">"localhost.test.passWord"</span>);</span><br><span class="line"> </span><br><span class="line">       String testRemark = environment.getProperty(<span class="string">"test.remark"</span>);</span><br><span class="line"> </span><br><span class="line">       System.<span class="keyword">out</span>.println(userName);</span><br><span class="line"> </span><br><span class="line">       System.<span class="keyword">out</span>.println(passWord);</span><br><span class="line"> </span><br><span class="line">       System.<span class="keyword">out</span>.println(testRemark);</span><br><span class="line"> </span><br><span class="line">   &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>测试结果</li></ul><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">-------------分割线---------------</span><br><span class="line">test123</span><br><span class="line">passWordTest</span><br><span class="line"><span class="keyword">test </span>userName is test123</span><br><span class="line">-------------分割线---------------</span><br><span class="line"> </span><br><span class="line">test123</span><br><span class="line"> </span><br><span class="line">passWordTest</span><br><span class="line"> </span><br><span class="line"><span class="keyword">test </span>userName is test123</span><br></pre></td></tr></table></figure><h2 id="修改默认配置文件的名字"><a href="#修改默认配置文件的名字" class="headerlink" title="修改默认配置文件的名字"></a>修改默认配置文件的名字</h2><ul><li><p>修改默认配置文件的名称，点击 Edit Configurations<br><img src="http://q2jt1v8qv.bkt.clouddn.com/FgLB9EC-Uazbsc0g3SoD43MJZk74" alt></p></li><li><p>添加参数 –spring.config.name = 修改配置文件的前缀名称<br><img src="http://q2jt1v8qv.bkt.clouddn.com/FtnXAHNUYef9_jJ5so59fXlWI-wO" alt></p></li></ul><h2 id="修改默认路径和配置文件的名字"><a href="#修改默认路径和配置文件的名字" class="headerlink" title="修改默认路径和配置文件的名字"></a>修改默认路径和配置文件的名字</h2><p>假设上级目录名称为 testConfig，里面有一个 test.properties</p><ul><li><p>spring.config.location=classpath:/testConfig/test.properties</p></li><li><p>spring.config.location=file:D://test/testConfig/test.properties</p></li><li><p>spring.config.location=classpath:XXX,file:XXX…… 指定多个</p></li></ul><h2 id="指定多个配置文件"><a href="#指定多个配置文件" class="headerlink" title="指定多个配置文件"></a>指定多个配置文件</h2><ul><li><p>上面 spring.config.location，或者 spring.config.name 这种方式</p></li><li><p>通过 @PropertySource 注解方式, 添加多个 @PropertySource，也可以使用</p><p>@PropertySources(@PropertySource(“classpath:app.properties”),@PropertySource(“classpath:appTwo.properties”)) 这种方式</p></li></ul><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yxj.spring;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.<span class="keyword">annotation</span>.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ConfigurableApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.<span class="keyword">annotation</span>.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.<span class="keyword">annotation</span>.PropertySource;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* <span class="doctag">@ProjectName</span>: springBootDemo</span></span><br><span class="line"><span class="comment">* <span class="doctag">@Package</span>: com.yxj.spring</span></span><br><span class="line"><span class="comment">* <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment">* <span class="doctag">@Author</span>: 阿杰</span></span><br><span class="line"><span class="comment">* <span class="doctag">@CreateDate</span>: 2019/1/18 20:18</span></span><br><span class="line"><span class="comment">* <span class="doctag">@UpdateUser</span>: 暂无</span></span><br><span class="line"><span class="comment">* <span class="doctag">@UpdateDate</span>: 2019/1/18 20:18</span></span><br><span class="line"><span class="comment">* <span class="doctag">@UpdateRemark</span>: The modified content</span></span><br><span class="line"><span class="comment">* <span class="doctag">@Version</span>: 1.0</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@PropertySource(<span class="meta-string">"classpath:app.properties"</span>)</span></span><br><span class="line"><span class="meta">@PropertySource(<span class="meta-string">"classpath:appTwo.properties"</span>)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringBootTestRun</span> </span>&#123;</span><br><span class="line">   <span class="meta">@Value(<span class="meta-string">"<span class="subst">$&#123;localhost.test.userName&#125;</span>"</span>)</span></span><br><span class="line">   <span class="keyword">private</span> String testUserName;</span><br><span class="line">   <span class="meta">@Value(<span class="meta-string">"<span class="subst">$&#123;app.test.value&#125;</span>"</span>)</span></span><br><span class="line">   <span class="keyword">private</span> String appValue;</span><br><span class="line">   <span class="meta">@Value(<span class="meta-string">"<span class="subst">$&#123;appTwo.test.value&#125;</span>"</span>)</span></span><br><span class="line">   <span class="keyword">private</span> String appTwoValue;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 也可以通过file这种方式来指定配置文件的位置</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> args</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="keyword">public</span> static void main(String[] args) &#123;</span><br><span class="line">       ConfigurableApplicationContext run = SpringApplication.run(SpringBootTestRun<span class="class">.<span class="keyword">class</span>, <span class="type">args);</span></span></span><br><span class="line">       System.<span class="keyword">out</span>.println(<span class="string">"-------------分割线---------------"</span>);</span><br><span class="line">       SpringBootTestRun bean = run.getBean(SpringBootTestRun<span class="class">.<span class="keyword">class</span>);</span></span><br><span class="line">       System.<span class="keyword">out</span>.println(bean.testUserName);</span><br><span class="line">       System.<span class="keyword">out</span>.println(bean.appValue);</span><br><span class="line">       System.<span class="keyword">out</span>.println(bean.appTwoValue);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">package</span> com.yxj.spring;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.<span class="keyword">annotation</span>.Value;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ConfigurableApplicationContext;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> org.springframework.context.<span class="keyword">annotation</span>.Bean;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> org.springframework.context.<span class="keyword">annotation</span>.PropertySource;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* <span class="doctag">@ProjectName</span>: springBootDemo</span></span><br><span class="line"><span class="comment">* <span class="doctag">@Package</span>: com.yxj.spring</span></span><br><span class="line"><span class="comment">* <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment">* <span class="doctag">@Author</span>: 阿杰</span></span><br><span class="line"><span class="comment">* <span class="doctag">@CreateDate</span>: 2019/1/18 20:18</span></span><br><span class="line"><span class="comment">* <span class="doctag">@UpdateUser</span>: 暂无</span></span><br><span class="line"><span class="comment">* <span class="doctag">@UpdateDate</span>: 2019/1/18 20:18</span></span><br><span class="line"><span class="comment">* <span class="doctag">@UpdateRemark</span>: The modified content</span></span><br><span class="line"><span class="comment">* <span class="doctag">@Version</span>: 1.0</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"> </span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"> </span><br><span class="line"><span class="meta">@PropertySource(<span class="meta-string">"classpath:app.properties"</span>)</span></span><br><span class="line"> </span><br><span class="line"><span class="meta">@PropertySource(<span class="meta-string">"classpath:appTwo.properties"</span>)</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringBootTestRun</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">   <span class="meta">@Value(<span class="meta-string">"<span class="subst">$&#123;localhost.test.userName&#125;</span>"</span>)</span></span><br><span class="line"> </span><br><span class="line">   <span class="keyword">private</span> String testUserName;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">   <span class="meta">@Value(<span class="meta-string">"<span class="subst">$&#123;app.test.value&#125;</span>"</span>)</span></span><br><span class="line"> </span><br><span class="line">   <span class="keyword">private</span> String appValue;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">   <span class="meta">@Value(<span class="meta-string">"<span class="subst">$&#123;appTwo.test.value&#125;</span>"</span>)</span></span><br><span class="line"> </span><br><span class="line">   <span class="keyword">private</span> String appTwoValue;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 也可以通过file这种方式来指定配置文件的位置</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> args</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line"> </span><br><span class="line">   <span class="keyword">public</span> static void main(String[] args) &#123;</span><br><span class="line"> </span><br><span class="line">       ConfigurableApplicationContext run = SpringApplication.run(SpringBootTestRun<span class="class">.<span class="keyword">class</span>, <span class="type">args);</span></span></span><br><span class="line"> </span><br><span class="line">       System.<span class="keyword">out</span>.println(<span class="string">"-------------分割线---------------"</span>);</span><br><span class="line"> </span><br><span class="line">       SpringBootTestRun bean = run.getBean(SpringBootTestRun<span class="class">.<span class="keyword">class</span>);</span></span><br><span class="line"> </span><br><span class="line">       System.<span class="keyword">out</span>.println(bean.testUserName);</span><br><span class="line"> </span><br><span class="line">       System.<span class="keyword">out</span>.println(bean.appValue);</span><br><span class="line"> </span><br><span class="line">       System.<span class="keyword">out</span>.println(bean.appTwoValue);</span><br><span class="line"> </span><br><span class="line">   &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>app.properties</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">app</span>.<span class="keyword">test</span>.value=<span class="keyword">app</span></span><br></pre></td></tr></table></figure><p>appTwo.properties</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">appTwo.test.value</span>=appTwo</span><br></pre></td></tr></table></figure><p>测试结果</p><figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">--<span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="comment">分割线</span>--<span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span></span><br><span class="line"><span class="comment">test123</span></span><br><span class="line"><span class="comment">app</span></span><br><span class="line"><span class="comment">appTwo</span></span><br><span class="line"><span class="comment"></span>--<span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="comment">分割线</span>--<span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">test123</span></span><br><span class="line"><span class="comment"></span> </span><br><span class="line"><span class="comment">app</span></span><br><span class="line"><span class="comment"></span> </span><br><span class="line"><span class="comment">appTwo</span></span><br></pre></td></tr></table></figure><h2 id="声明"><a href="#声明" class="headerlink" title="声明"></a>声明</h2><ul><li><p>本人是与 springBoot 教学视频同步学习，此文章是看视频总结出来的重点内容.</p></li><li><p>如果觉得文章描绘的不够清楚，欢迎留言，也可以点击关于我，关注公众号，在公众号内发送关键字 “springboot” 或者 “springBoot” 领取 springBoot 教程。</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> springBoot </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JAVA </tag>
            
            <tag> 微服务 </tag>
            
            <tag> SpringBoot </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
